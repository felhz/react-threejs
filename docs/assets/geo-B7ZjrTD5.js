import{p as nr}from"./geo_-FU1-d8Ot.js";import{j as O,r as an,u as me}from"./ssg-client-CDxgdoC5.js";import{g as Nn,s as tr}from"./index-YwzUBO0B.js";import{C as er,a as ht,O as rr,d as ir,c as or,S as sr,u as ar,F as ur,e as Ft,V as at,b as lr}from"./OrbitControls-CKMLfF9X.js";import{G as fr,a as cr}from"./GizmoViewport-D3I-TYKD.js";import{L as ye}from"./Line-Ds3YDvfi.js";import{E as hr,S as pr}from"./shapes-iWsuA3J4.js";import{T as dr}from"./Text-DksmOYdi.js";import"./Hud-BF2-s2Kh.js";var G=63710088e-1,we={centimeters:G*100,centimetres:G*100,degrees:360/(2*Math.PI),feet:G*3.28084,inches:G*39.37,kilometers:G/1e3,kilometres:G/1e3,meters:G,metres:G,miles:G/1609.344,millimeters:G*1e3,millimetres:G*1e3,nauticalmiles:G/1852,radians:1,yards:G*1.0936};function gr(n,t,e={}){const r={type:"Feature"};return(e.id===0||e.id)&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.properties=t||{},r.geometry=n,r}function pt(n,t,e={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ot(n[0])||!Ot(n[1]))throw new Error("coordinates must contain numbers");return gr({type:"Point",coordinates:n},t,e)}function vr(n,t="kilometers"){const e=we[t];if(!e)throw new Error(t+" units is invalid");return n*e}function mr(n,t="kilometers"){const e=we[t];if(!e)throw new Error(t+" units is invalid");return n/e}function dt(n){return n%(2*Math.PI)*180/Math.PI}function W(n){return n%360*Math.PI/180}function Ot(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function _e(n,t,e={}){if(e.final===!0)return yr(n,t);const r=Nn(n),i=Nn(t),o=W(r[0]),s=W(i[0]),u=W(r[1]),l=W(i[1]),f=Math.sin(s-o)*Math.cos(l),a=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(s-o);return dt(Math.atan2(f,a))}function yr(n,t){let e=_e(t,n);return e=(e+180)%360,e}function wr(n,t,e,r={}){const i=Nn(n),o=W(i[0]),s=W(i[1]),u=W(e),l=mr(t,r.units),f=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(u)),a=o+Math.atan2(Math.sin(u)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(f)),c=dt(a),h=dt(f);return pt([c,h],r.properties)}function _r(n,t,e={}){var r=Nn(n),i=Nn(t),o=W(i[1]-r[1]),s=W(i[0]-r[0]),u=W(r[1]),l=W(i[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(l);return vr(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),e.units)}function xr(n,t){const e=_r(n,t),r=_e(n,t);return wr(n,e/2,r)}class Er{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],s=t+o,u=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);u&&(e[r++]=u),t=s}return e[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let e=this._n,r,i,o,s=0;if(e>0){for(s=t[--e];e>0&&(r=s,i=t[--e],s=r+i,o=i-(s-r),!o););e>0&&(o<0&&t[e-1]<0||o>0&&t[e-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}function*Sr(n){for(const t of n)yield*t}function xe(n){return Array.from(Sr(n))}var Mr={value:()=>{}};function Ee(){for(var n=0,t=arguments.length,e={},r;n<t;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new zn(e)}function zn(n){this._=n}function Nr(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}zn.prototype=Ee.prototype={constructor:zn,on:function(n,t){var e=this._,r=Nr(n+"",e),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=Ar(e[i],n.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(n=r[o]).type)e[i]=Vt(e[i],n.name,t);else if(t==null)for(i in e)e[i]=Vt(e[i],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new zn(n)},call:function(n,t){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};function Ar(n,t){for(var e=0,r=n.length,i;e<r;++e)if((i=n[e]).name===t)return i.value}function Vt(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=Mr,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}var gt="http://www.w3.org/1999/xhtml";const Dt={svg:"http://www.w3.org/2000/svg",xhtml:gt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rt(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),Dt.hasOwnProperty(t)?{space:Dt[t],local:n}:n}function Cr(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===gt&&t.documentElement.namespaceURI===gt?t.createElement(n):t.createElementNS(e,n)}}function Pr(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Se(n){var t=rt(n);return(t.local?Pr:Cr)(t)}function Rr(){}function Pt(n){return n==null?Rr:function(){return this.querySelector(n)}}function Tr(n){typeof n!="function"&&(n=Pt(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o=t[i],s=o.length,u=r[i]=new Array(s),l,f,a=0;a<s;++a)(l=o[a])&&(f=n.call(l,l.__data__,a,o))&&("__data__"in l&&(f.__data__=l.__data__),u[a]=f);return new J(r,this._parents)}function br(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function $r(){return[]}function Me(n){return n==null?$r:function(){return this.querySelectorAll(n)}}function kr(n){return function(){return br(n.apply(this,arguments))}}function Ir(n){typeof n=="function"?n=kr(n):n=Me(n);for(var t=this._groups,e=t.length,r=[],i=[],o=0;o<e;++o)for(var s=t[o],u=s.length,l,f=0;f<u;++f)(l=s[f])&&(r.push(n.call(l,l.__data__,f,s)),i.push(l));return new J(r,i)}function Ne(n){return function(){return this.matches(n)}}function Ae(n){return function(t){return t.matches(n)}}var Lr=Array.prototype.find;function Hr(n){return function(){return Lr.call(this.children,n)}}function Fr(){return this.firstElementChild}function Or(n){return this.select(n==null?Fr:Hr(typeof n=="function"?n:Ae(n)))}var Vr=Array.prototype.filter;function Dr(){return Array.from(this.children)}function qr(n){return function(){return Vr.call(this.children,n)}}function Xr(n){return this.selectAll(n==null?Dr:qr(typeof n=="function"?n:Ae(n)))}function zr(n){typeof n!="function"&&(n=Ne(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o=t[i],s=o.length,u=r[i]=[],l,f=0;f<s;++f)(l=o[f])&&n.call(l,l.__data__,f,o)&&u.push(l);return new J(r,this._parents)}function Ce(n){return new Array(n.length)}function Gr(){return new J(this._enter||this._groups.map(Ce),this._parents)}function Un(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Un.prototype={constructor:Un,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Br(n){return function(){return n}}function Yr(n,t,e,r,i,o){for(var s=0,u,l=t.length,f=o.length;s<f;++s)(u=t[s])?(u.__data__=o[s],r[s]=u):e[s]=new Un(n,o[s]);for(;s<l;++s)(u=t[s])&&(i[s]=u)}function Ur(n,t,e,r,i,o,s){var u,l,f=new Map,a=t.length,c=o.length,h=new Array(a),p;for(u=0;u<a;++u)(l=t[u])&&(h[u]=p=s.call(l,l.__data__,u,t)+"",f.has(p)?i[u]=l:f.set(p,l));for(u=0;u<c;++u)p=s.call(n,o[u],u,o)+"",(l=f.get(p))?(r[u]=l,l.__data__=o[u],f.delete(p)):e[u]=new Un(n,o[u]);for(u=0;u<a;++u)(l=t[u])&&f.get(h[u])===l&&(i[u]=l)}function Kr(n){return n.__data__}function Wr(n,t){if(!arguments.length)return Array.from(this,Kr);var e=t?Ur:Yr,r=this._parents,i=this._groups;typeof n!="function"&&(n=Br(n));for(var o=i.length,s=new Array(o),u=new Array(o),l=new Array(o),f=0;f<o;++f){var a=r[f],c=i[f],h=c.length,p=Jr(n.call(a,a&&a.__data__,f,r)),d=p.length,m=u[f]=new Array(d),v=s[f]=new Array(d),M=l[f]=new Array(h);e(a,c,m,v,M,p,t);for(var w=0,_=0,y,x;w<d;++w)if(y=m[w]){for(w>=_&&(_=w+1);!(x=v[_])&&++_<d;);y._next=x||null}}return s=new J(s,r),s._enter=u,s._exit=l,s}function Jr(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Qr(){return new J(this._exit||this._groups.map(Ce),this._parents)}function Zr(n,t,e){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),t!=null&&(i=t(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function jr(n){for(var t=n.selection?n.selection():n,e=this._groups,r=t._groups,i=e.length,o=r.length,s=Math.min(i,o),u=new Array(i),l=0;l<s;++l)for(var f=e[l],a=r[l],c=f.length,h=u[l]=new Array(c),p,d=0;d<c;++d)(p=f[d]||a[d])&&(h[d]=p);for(;l<i;++l)u[l]=e[l];return new J(u,this._parents)}function ni(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var r=n[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ti(n){n||(n=ei);function t(c,h){return c&&h?n(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var s=e[o],u=s.length,l=i[o]=new Array(u),f,a=0;a<u;++a)(f=s[a])&&(l[a]=f);l.sort(t)}return new J(i,this._parents).order()}function ei(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function ri(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function ii(){return Array.from(this)}function oi(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function si(){let n=0;for(const t of this)++n;return n}function ai(){return!this.node()}function ui(n){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],o=0,s=i.length,u;o<s;++o)(u=i[o])&&n.call(u,u.__data__,o,i);return this}function li(n){return function(){this.removeAttribute(n)}}function fi(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ci(n,t){return function(){this.setAttribute(n,t)}}function hi(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function pi(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function di(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function gi(n,t){var e=rt(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((t==null?e.local?fi:li:typeof t=="function"?e.local?di:pi:e.local?hi:ci)(e,t))}function Pe(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function vi(n){return function(){this.style.removeProperty(n)}}function mi(n,t,e){return function(){this.style.setProperty(n,t,e)}}function yi(n,t,e){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function wi(n,t,e){return arguments.length>1?this.each((t==null?vi:typeof t=="function"?yi:mi)(n,t,e??"")):dn(this.node(),n)}function dn(n,t){return n.style.getPropertyValue(t)||Pe(n).getComputedStyle(n,null).getPropertyValue(t)}function _i(n){return function(){delete this[n]}}function xi(n,t){return function(){this[n]=t}}function Ei(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function Si(n,t){return arguments.length>1?this.each((t==null?_i:typeof t=="function"?Ei:xi)(n,t)):this.node()[n]}function Re(n){return n.trim().split(/^|\s+/)}function Rt(n){return n.classList||new Te(n)}function Te(n){this._node=n,this._names=Re(n.getAttribute("class")||"")}Te.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function be(n,t){for(var e=Rt(n),r=-1,i=t.length;++r<i;)e.add(t[r])}function $e(n,t){for(var e=Rt(n),r=-1,i=t.length;++r<i;)e.remove(t[r])}function Mi(n){return function(){be(this,n)}}function Ni(n){return function(){$e(this,n)}}function Ai(n,t){return function(){(t.apply(this,arguments)?be:$e)(this,n)}}function Ci(n,t){var e=Re(n+"");if(arguments.length<2){for(var r=Rt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof t=="function"?Ai:t?Mi:Ni)(e,t))}function Pi(){this.textContent=""}function Ri(n){return function(){this.textContent=n}}function Ti(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function bi(n){return arguments.length?this.each(n==null?Pi:(typeof n=="function"?Ti:Ri)(n)):this.node().textContent}function $i(){this.innerHTML=""}function ki(n){return function(){this.innerHTML=n}}function Ii(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function Li(n){return arguments.length?this.each(n==null?$i:(typeof n=="function"?Ii:ki)(n)):this.node().innerHTML}function Hi(){this.nextSibling&&this.parentNode.appendChild(this)}function Fi(){return this.each(Hi)}function Oi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vi(){return this.each(Oi)}function Di(n){var t=typeof n=="function"?n:Se(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qi(){return null}function Xi(n,t){var e=typeof n=="function"?n:Se(n),r=t==null?qi:typeof t=="function"?t:Pt(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function zi(){var n=this.parentNode;n&&n.removeChild(this)}function Gi(){return this.each(zi)}function Bi(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Yi(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Ui(n){return this.select(n?Yi:Bi)}function Ki(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Wi(n){return function(t){n.call(this,t,this.__data__)}}function Ji(n){return n.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}})}function Qi(n){return function(){var t=this.__on;if(t){for(var e=0,r=-1,i=t.length,o;e<i;++e)o=t[e],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Zi(n,t,e){return function(){var r=this.__on,i,o=Wi(t);if(r){for(var s=0,u=r.length;s<u;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=t;return}}this.addEventListener(n.type,o,e),i={type:n.type,name:n.name,value:t,listener:o,options:e},r?r.push(i):this.__on=[i]}}function ji(n,t,e){var r=Ji(n+""),i,o=r.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,f=u.length,a;l<f;++l)for(i=0,a=u[l];i<o;++i)if((s=r[i]).type===a.type&&s.name===a.name)return a.value}return}for(u=t?Zi:Qi,i=0;i<o;++i)this.each(u(r[i],t,e));return this}function ke(n,t,e){var r=Pe(n),i=r.CustomEvent;typeof i=="function"?i=new i(t,e):(i=r.document.createEvent("Event"),e?(i.initEvent(t,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(t,!1,!1)),n.dispatchEvent(i)}function no(n,t){return function(){return ke(this,n,t)}}function to(n,t){return function(){return ke(this,n,t.apply(this,arguments))}}function eo(n,t){return this.each((typeof t=="function"?to:no)(n,t))}function*ro(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var io=[null];function J(n,t){this._groups=n,this._parents=t}function kn(){return new J([[document.documentElement]],io)}function oo(){return this}J.prototype=kn.prototype={constructor:J,select:Tr,selectAll:Ir,selectChild:Or,selectChildren:Xr,filter:zr,data:Wr,enter:Gr,exit:Qr,join:Zr,merge:jr,selection:oo,order:ni,sort:ti,call:ri,nodes:ii,node:oi,size:si,empty:ai,each:ui,attr:gi,style:wi,property:Si,classed:Ci,text:bi,html:Li,raise:Fi,lower:Vi,append:Di,insert:Xi,remove:Gi,clone:Ui,datum:Ki,on:ji,dispatch:eo,[Symbol.iterator]:ro};function Tt(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Ie(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function In(){}var An=.7,Kn=1/An,hn="\\s*([+-]?\\d+)\\s*",Cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",so=/^#([0-9a-f]{3,8})$/,ao=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),uo=new RegExp(`^rgb\\(${Z},${Z},${Z}\\)$`),lo=new RegExp(`^rgba\\(${hn},${hn},${hn},${Cn}\\)$`),fo=new RegExp(`^rgba\\(${Z},${Z},${Z},${Cn}\\)$`),co=new RegExp(`^hsl\\(${Cn},${Z},${Z}\\)$`),ho=new RegExp(`^hsla\\(${Cn},${Z},${Z},${Cn}\\)$`),qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tt(In,Pn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Xt,formatHex:Xt,formatHex8:po,formatHsl:go,formatRgb:zt,toString:zt});function Xt(){return this.rgb().formatHex()}function po(){return this.rgb().formatHex8()}function go(){return Le(this).formatHsl()}function zt(){return this.rgb().formatRgb()}function Pn(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=so.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?Gt(t):e===3?new X(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ao.exec(n))?new X(t[1],t[2],t[3],1):(t=uo.exec(n))?new X(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lo.exec(n))?Hn(t[1],t[2],t[3],t[4]):(t=fo.exec(n))?Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=co.exec(n))?Ut(t[1],t[2]/100,t[3]/100,1):(t=ho.exec(n))?Ut(t[1],t[2]/100,t[3]/100,t[4]):qt.hasOwnProperty(n)?Gt(qt[n]):n==="transparent"?new X(NaN,NaN,NaN,0):null}function Gt(n){return new X(n>>16&255,n>>8&255,n&255,1)}function Hn(n,t,e,r){return r<=0&&(n=t=e=NaN),new X(n,t,e,r)}function vo(n){return n instanceof In||(n=Pn(n)),n?(n=n.rgb(),new X(n.r,n.g,n.b,n.opacity)):new X}function vt(n,t,e,r){return arguments.length===1?vo(n):new X(n,t,e,r??1)}function X(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}Tt(X,vt,Ie(In,{brighter(n){return n=n==null?Kn:Math.pow(Kn,n),new X(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?An:Math.pow(An,n),new X(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new X(ln(this.r),ln(this.g),ln(this.b),Wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bt,formatHex:Bt,formatHex8:mo,formatRgb:Yt,toString:Yt}));function Bt(){return`#${un(this.r)}${un(this.g)}${un(this.b)}`}function mo(){return`#${un(this.r)}${un(this.g)}${un(this.b)}${un((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yt(){const n=Wn(this.opacity);return`${n===1?"rgb(":"rgba("}${ln(this.r)}, ${ln(this.g)}, ${ln(this.b)}${n===1?")":`, ${n})`}`}function Wn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ln(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function un(n){return n=ln(n),(n<16?"0":"")+n.toString(16)}function Ut(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new K(n,t,e,r)}function Le(n){if(n instanceof K)return new K(n.h,n.s,n.l,n.opacity);if(n instanceof In||(n=Pn(n)),!n)return new K;if(n instanceof K)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),o=Math.max(t,e,r),s=NaN,u=o-i,l=(o+i)/2;return u?(t===o?s=(e-r)/u+(e<r)*6:e===o?s=(r-t)/u+2:s=(t-e)/u+4,u/=l<.5?o+i:2-o-i,s*=60):u=l>0&&l<1?0:s,new K(s,u,l,n.opacity)}function yo(n,t,e,r){return arguments.length===1?Le(n):new K(n,t,e,r??1)}function K(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}Tt(K,yo,Ie(In,{brighter(n){return n=n==null?Kn:Math.pow(Kn,n),new K(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?An:Math.pow(An,n),new K(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new X(ut(n>=240?n-240:n+120,i,r),ut(n,i,r),ut(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new K(Kt(this.h),Fn(this.s),Fn(this.l),Wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Wn(this.opacity);return`${n===1?"hsl(":"hsla("}${Kt(this.h)}, ${Fn(this.s)*100}%, ${Fn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Kt(n){return n=(n||0)%360,n<0?n+360:n}function Fn(n){return Math.max(0,Math.min(1,n||0))}function ut(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const He=n=>()=>n;function wo(n,t){return function(e){return n+e*t}}function _o(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function xo(n){return(n=+n)==1?Fe:function(t,e){return e-t?_o(t,e,n):He(isNaN(t)?e:t)}}function Fe(n,t){var e=t-n;return e?wo(n,e):He(isNaN(n)?t:n)}const Wt=function n(t){var e=xo(t);function r(i,o){var s=e((i=vt(i)).r,(o=vt(o)).r),u=e(i.g,o.g),l=e(i.b,o.b),f=Fe(i.opacity,o.opacity);return function(a){return i.r=s(a),i.g=u(a),i.b=l(a),i.opacity=f(a),i+""}}return r.gamma=n,r}(1);function on(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lt=new RegExp(mt.source,"g");function Eo(n){return function(){return n}}function So(n){return function(t){return n(t)+""}}function Mo(n,t){var e=mt.lastIndex=lt.lastIndex=0,r,i,o,s=-1,u=[],l=[];for(n=n+"",t=t+"";(r=mt.exec(n))&&(i=lt.exec(t));)(o=i.index)>e&&(o=t.slice(e,o),u[s]?u[s]+=o:u[++s]=o),(r=r[0])===(i=i[0])?u[s]?u[s]+=i:u[++s]=i:(u[++s]=null,l.push({i:s,x:on(r,i)})),e=lt.lastIndex;return e<t.length&&(o=t.slice(e),u[s]?u[s]+=o:u[++s]=o),u.length<2?l[0]?So(l[0].x):Eo(t):(t=l.length,function(f){for(var a=0,c;a<t;++a)u[(c=l[a]).i]=c.x(f);return u.join("")})}var Jt=180/Math.PI,yt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oe(n,t,e,r,i,o){var s,u,l;return(s=Math.sqrt(n*n+t*t))&&(n/=s,t/=s),(l=n*e+t*r)&&(e-=n*l,r-=t*l),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,l/=u),n*r<t*e&&(n=-n,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,n)*Jt,skewX:Math.atan(l)*Jt,scaleX:s,scaleY:u}}var On;function No(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?yt:Oe(t.a,t.b,t.c,t.d,t.e,t.f)}function Ao(n){return n==null||(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",n),!(n=On.transform.baseVal.consolidate()))?yt:(n=n.matrix,Oe(n.a,n.b,n.c,n.d,n.e,n.f))}function Ve(n,t,e,r){function i(f){return f.length?f.pop()+" ":""}function o(f,a,c,h,p,d){if(f!==c||a!==h){var m=p.push("translate(",null,t,null,e);d.push({i:m-4,x:on(f,c)},{i:m-2,x:on(a,h)})}else(c||h)&&p.push("translate("+c+t+h+e)}function s(f,a,c,h){f!==a?(f-a>180?a+=360:a-f>180&&(f+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:on(f,a)})):a&&c.push(i(c)+"rotate("+a+r)}function u(f,a,c,h){f!==a?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:on(f,a)}):a&&c.push(i(c)+"skewX("+a+r)}function l(f,a,c,h,p,d){if(f!==c||a!==h){var m=p.push(i(p)+"scale(",null,",",null,")");d.push({i:m-4,x:on(f,c)},{i:m-2,x:on(a,h)})}else(c!==1||h!==1)&&p.push(i(p)+"scale("+c+","+h+")")}return function(f,a){var c=[],h=[];return f=n(f),a=n(a),o(f.translateX,f.translateY,a.translateX,a.translateY,c,h),s(f.rotate,a.rotate,c,h),u(f.skewX,a.skewX,c,h),l(f.scaleX,f.scaleY,a.scaleX,a.scaleY,c,h),f=a=null,function(p){for(var d=-1,m=h.length,v;++d<m;)c[(v=h[d]).i]=v.x(p);return c.join("")}}}var Co=Ve(No,"px, ","px)","deg)"),Po=Ve(Ao,", ",")",")"),gn=0,_n=0,wn=0,De=1e3,Jn,xn,Qn=0,fn=0,it=0,Rn=typeof performance=="object"&&performance.now?performance:Date,qe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function bt(){return fn||(qe(Ro),fn=Rn.now()+it)}function Ro(){fn=0}function Zn(){this._call=this._time=this._next=null}Zn.prototype=Xe.prototype={constructor:Zn,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?bt():+e)+(t==null?0:+t),!this._next&&xn!==this&&(xn?xn._next=this:Jn=this,xn=this),this._call=n,this._time=e,wt()},stop:function(){this._call&&(this._call=null,this._time=1/0,wt())}};function Xe(n,t,e){var r=new Zn;return r.restart(n,t,e),r}function To(){bt(),++gn;for(var n=Jn,t;n;)(t=fn-n._time)>=0&&n._call.call(void 0,t),n=n._next;--gn}function Qt(){fn=(Qn=Rn.now())+it,gn=_n=0;try{To()}finally{gn=0,$o(),fn=0}}function bo(){var n=Rn.now(),t=n-Qn;t>De&&(it-=t,Qn=n)}function $o(){for(var n,t=Jn,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Jn=e);xn=n,wt(r)}function wt(n){if(!gn){_n&&(_n=clearTimeout(_n));var t=n-fn;t>24?(n<1/0&&(_n=setTimeout(Qt,n-Rn.now()-it)),wn&&(wn=clearInterval(wn))):(wn||(Qn=Rn.now(),wn=setInterval(bo,De)),gn=1,qe(Qt))}}function Zt(n,t,e){var r=new Zn;return t=t==null?0:+t,r.restart(i=>{r.stop(),n(i+t)},t,e),r}var ko=Ee("start","end","cancel","interrupt"),Io=[],ze=0,jt=1,_t=2,Gn=3,ne=4,xt=5,Bn=6;function ot(n,t,e,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(e in s)return;Lo(n,e,{name:t,index:r,group:i,on:ko,tween:Io,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ze})}function $t(n,t){var e=Q(n,t);if(e.state>ze)throw new Error("too late; already scheduled");return e}function j(n,t){var e=Q(n,t);if(e.state>Gn)throw new Error("too late; already running");return e}function Q(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function Lo(n,t,e){var r=n.__transition,i;r[t]=e,e.timer=Xe(o,0,e.time);function o(f){e.state=jt,e.timer.restart(s,e.delay,e.time),e.delay<=f&&s(f-e.delay)}function s(f){var a,c,h,p;if(e.state!==jt)return l();for(a in r)if(p=r[a],p.name===e.name){if(p.state===Gn)return Zt(s);p.state===ne?(p.state=Bn,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete r[a]):+a<t&&(p.state=Bn,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete r[a])}if(Zt(function(){e.state===Gn&&(e.state=ne,e.timer.restart(u,e.delay,e.time),u(f))}),e.state=_t,e.on.call("start",n,n.__data__,e.index,e.group),e.state===_t){for(e.state=Gn,i=new Array(h=e.tween.length),a=0,c=-1;a<h;++a)(p=e.tween[a].value.call(n,n.__data__,e.index,e.group))&&(i[++c]=p);i.length=c+1}}function u(f){for(var a=f<e.duration?e.ease.call(null,f/e.duration):(e.timer.restart(l),e.state=xt,1),c=-1,h=i.length;++c<h;)i[c].call(n,a);e.state===xt&&(e.on.call("end",n,n.__data__,e.index,e.group),l())}function l(){e.state=Bn,e.timer.stop(),delete r[t];for(var f in r)return;delete n.__transition}}function Ho(n,t){var e=n.__transition,r,i,o=!0,s;if(e){t=t==null?null:t+"";for(s in e){if((r=e[s]).name!==t){o=!1;continue}i=r.state>_t&&r.state<xt,r.state=Bn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[s]}o&&delete n.__transition}}function Fo(n){return this.each(function(){Ho(this,n)})}function Oo(n,t){var e,r;return function(){var i=j(this,n),o=i.tween;if(o!==e){r=e=o;for(var s=0,u=r.length;s<u;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Vo(n,t,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=j(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var u={name:t,value:e},l=0,f=i.length;l<f;++l)if(i[l].name===t){i[l]=u;break}l===f&&i.push(u)}o.tween=i}}function Do(n,t){var e=this._id;if(n+="",arguments.length<2){for(var r=Q(this.node(),e).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((t==null?Oo:Vo)(e,n,t))}function kt(n,t,e){var r=n._id;return n.each(function(){var i=j(this,r);(i.value||(i.value={}))[t]=e.apply(this,arguments)}),function(i){return Q(i,r).value[t]}}function Ge(n,t){var e;return(typeof t=="number"?on:t instanceof Pn?Wt:(e=Pn(t))?(t=e,Wt):Mo)(n,t)}function qo(n){return function(){this.removeAttribute(n)}}function Xo(n){return function(){this.removeAttributeNS(n.space,n.local)}}function zo(n,t,e){var r,i=e+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=t(r=s,e)}}function Go(n,t,e){var r,i=e+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=t(r=s,e)}}function Bo(n,t,e){var r,i,o;return function(){var s,u=e(this),l;return u==null?void this.removeAttribute(n):(s=this.getAttribute(n),l=u+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,u)))}}function Yo(n,t,e){var r,i,o;return function(){var s,u=e(this),l;return u==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),l=u+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,u)))}}function Uo(n,t){var e=rt(n),r=e==="transform"?Po:Ge;return this.attrTween(n,typeof t=="function"?(e.local?Yo:Bo)(e,r,kt(this,"attr."+n,t)):t==null?(e.local?Xo:qo)(e):(e.local?Go:zo)(e,r,t))}function Ko(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Wo(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Jo(n,t){var e,r;function i(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&Wo(n,o)),e}return i._value=t,i}function Qo(n,t){var e,r;function i(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&Ko(n,o)),e}return i._value=t,i}function Zo(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var r=rt(n);return this.tween(e,(r.local?Jo:Qo)(r,t))}function jo(n,t){return function(){$t(this,n).delay=+t.apply(this,arguments)}}function ns(n,t){return t=+t,function(){$t(this,n).delay=t}}function ts(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?jo:ns)(t,n)):Q(this.node(),t).delay}function es(n,t){return function(){j(this,n).duration=+t.apply(this,arguments)}}function rs(n,t){return t=+t,function(){j(this,n).duration=t}}function is(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?es:rs)(t,n)):Q(this.node(),t).duration}function os(n,t){if(typeof t!="function")throw new Error;return function(){j(this,n).ease=t}}function ss(n){var t=this._id;return arguments.length?this.each(os(t,n)):Q(this.node(),t).ease}function as(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;j(this,n).ease=e}}function us(n){if(typeof n!="function")throw new Error;return this.each(as(this._id,n))}function ls(n){typeof n!="function"&&(n=Ne(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o=t[i],s=o.length,u=r[i]=[],l,f=0;f<s;++f)(l=o[f])&&n.call(l,l.__data__,f,o)&&u.push(l);return new rn(r,this._parents,this._name,this._id)}function fs(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,r=t.length,i=e.length,o=Math.min(r,i),s=new Array(r),u=0;u<o;++u)for(var l=t[u],f=e[u],a=l.length,c=s[u]=new Array(a),h,p=0;p<a;++p)(h=l[p]||f[p])&&(c[p]=h);for(;u<r;++u)s[u]=t[u];return new rn(s,this._parents,this._name,this._id)}function cs(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function hs(n,t,e){var r,i,o=cs(t)?$t:j;return function(){var s=o(this,n),u=s.on;u!==r&&(i=(r=u).copy()).on(t,e),s.on=i}}function ps(n,t){var e=this._id;return arguments.length<2?Q(this.node(),e).on.on(n):this.each(hs(e,n,t))}function ds(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function gs(){return this.on("end.remove",ds(this._id))}function vs(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Pt(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var u=r[s],l=u.length,f=o[s]=new Array(l),a,c,h=0;h<l;++h)(a=u[h])&&(c=n.call(a,a.__data__,h,u))&&("__data__"in a&&(c.__data__=a.__data__),f[h]=c,ot(f[h],t,e,h,f,Q(a,e)));return new rn(o,this._parents,t,e)}function ms(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Me(n));for(var r=this._groups,i=r.length,o=[],s=[],u=0;u<i;++u)for(var l=r[u],f=l.length,a,c=0;c<f;++c)if(a=l[c]){for(var h=n.call(a,a.__data__,c,l),p,d=Q(a,e),m=0,v=h.length;m<v;++m)(p=h[m])&&ot(p,t,e,m,h,d);o.push(h),s.push(a)}return new rn(o,s,t,e)}var ys=kn.prototype.constructor;function ws(){return new ys(this._groups,this._parents)}function _s(n,t){var e,r,i;return function(){var o=dn(this,n),s=(this.style.removeProperty(n),dn(this,n));return o===s?null:o===e&&s===r?i:i=t(e=o,r=s)}}function Be(n){return function(){this.style.removeProperty(n)}}function xs(n,t,e){var r,i=e+"",o;return function(){var s=dn(this,n);return s===i?null:s===r?o:o=t(r=s,e)}}function Es(n,t,e){var r,i,o;return function(){var s=dn(this,n),u=e(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(n),dn(this,n))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,u))}}function Ss(n,t){var e,r,i,o="style."+t,s="end."+o,u;return function(){var l=j(this,n),f=l.on,a=l.value[o]==null?u||(u=Be(t)):void 0;(f!==e||i!==a)&&(r=(e=f).copy()).on(s,i=a),l.on=r}}function Ms(n,t,e){var r=(n+="")=="transform"?Co:Ge;return t==null?this.styleTween(n,_s(n,r)).on("end.style."+n,Be(n)):typeof t=="function"?this.styleTween(n,Es(n,r,kt(this,"style."+n,t))).each(Ss(this._id,n)):this.styleTween(n,xs(n,r,t),e).on("end.style."+n,null)}function Ns(n,t,e){return function(r){this.style.setProperty(n,t.call(this,r),e)}}function As(n,t,e){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Ns(n,s,e)),r}return o._value=t,o}function Cs(n,t,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,As(n,t,e??""))}function Ps(n){return function(){this.textContent=n}}function Rs(n){return function(){var t=n(this);this.textContent=t??""}}function Ts(n){return this.tween("text",typeof n=="function"?Rs(kt(this,"text",n)):Ps(n==null?"":n+""))}function bs(n){return function(t){this.textContent=n.call(this,t)}}function $s(n){var t,e;function r(){var i=n.apply(this,arguments);return i!==e&&(t=(e=i)&&bs(i)),t}return r._value=n,r}function ks(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,$s(n))}function Is(){for(var n=this._name,t=this._id,e=Ye(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],u=s.length,l,f=0;f<u;++f)if(l=s[f]){var a=Q(l,t);ot(l,n,e,f,s,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease})}return new rn(r,this._parents,n,e)}function Ls(){var n,t,e=this,r=e._id,i=e.size();return new Promise(function(o,s){var u={value:s},l={value:function(){--i===0&&o()}};e.each(function(){var f=j(this,r),a=f.on;a!==n&&(t=(n=a).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(l)),f.on=t}),i===0&&o()})}var Hs=0;function rn(n,t,e,r){this._groups=n,this._parents=t,this._name=e,this._id=r}function Ye(){return++Hs}var en=kn.prototype;rn.prototype={constructor:rn,select:vs,selectAll:ms,selectChild:en.selectChild,selectChildren:en.selectChildren,filter:ls,merge:fs,selection:ws,transition:Is,call:en.call,nodes:en.nodes,node:en.node,size:en.size,empty:en.empty,each:en.each,on:ps,attr:Uo,attrTween:Zo,style:Ms,styleTween:Cs,text:Ts,textTween:ks,remove:gs,tween:Do,delay:ts,duration:is,ease:ss,easeVarying:us,end:Ls,[Symbol.iterator]:en[Symbol.iterator]};function Fs(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Os={time:null,delay:0,duration:250,ease:Fs};function Vs(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function Ds(n){var t,e;n instanceof rn?(t=n._id,n=n._name):(t=Ye(),(e=Os).time=bt(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],u=s.length,l,f=0;f<u;++f)(l=s[f])&&ot(l,n,t,f,s,e||Vs(l,t));return new rn(r,this._parents,n,t)}kn.prototype.interrupt=Fo;kn.prototype.transition=Ds;var b=1e-6,qs=1e-12,A=Math.PI,z=A/2,te=A/4,U=A*2,B=180/A,F=A/180,k=Math.abs,Ue=Math.atan,Tn=Math.atan2,L=Math.cos,Xs=Math.exp,zs=Math.log,H=Math.sin,Gs=Math.sign||function(n){return n>0?1:n<0?-1:0},st=Math.sqrt,Bs=Math.tan;function Ys(n){return n>1?0:n<-1?A:Math.acos(n)}function bn(n){return n>1?z:n<-1?-z:Math.asin(n)}function En(){}function jn(n,t){n&&re.hasOwnProperty(n.type)&&re[n.type](n,t)}var ee={Feature:function(n,t){jn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)jn(e[r].geometry,t)}},re={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){Et(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Et(e[r],t,0)},Polygon:function(n,t){ie(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)ie(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)jn(e[r],t)}};function Et(n,t,e){var r=-1,i=n.length-e,o;for(t.lineStart();++r<i;)o=n[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function ie(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)Et(n[e],t,1);t.polygonEnd()}function Us(n,t){n&&ee.hasOwnProperty(n.type)?ee[n.type](n,t):jn(n,t)}function St(n){return[Tn(n[1],n[0]),bn(n[2])]}function vn(n){var t=n[0],e=n[1],r=L(e);return[r*L(t),r*H(t),H(e)]}function Vn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function nt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ft(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Dn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Mt(n){var t=st(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Nt(n,t){function e(r,i){return r=n(r,i),t(r[0],r[1])}return n.invert&&t.invert&&(e.invert=function(r,i){return r=t.invert(r,i),r&&n.invert(r[0],r[1])}),e}function At(n,t){return k(n)>A&&(n-=Math.round(n/U)*U),[n,t]}At.invert=At;function Ke(n,t,e){return(n%=U)?t||e?Nt(se(n),ae(t,e)):se(n):t||e?ae(t,e):At}function oe(n){return function(t,e){return t+=n,k(t)>A&&(t-=Math.round(t/U)*U),[t,e]}}function se(n){var t=oe(n);return t.invert=oe(-n),t}function ae(n,t){var e=L(n),r=H(n),i=L(t),o=H(t);function s(u,l){var f=L(l),a=L(u)*f,c=H(u)*f,h=H(l),p=h*e+a*r;return[Tn(c*i-p*o,a*e-h*r),bn(p*i+c*o)]}return s.invert=function(u,l){var f=L(l),a=L(u)*f,c=H(u)*f,h=H(l),p=h*i-c*o;return[Tn(c*i+h*o,a*e+p*r),bn(p*e-a*r)]},s}function Ks(n){n=Ke(n[0]*F,n[1]*F,n.length>2?n[2]*F:0);function t(e){return e=n(e[0]*F,e[1]*F),e[0]*=B,e[1]*=B,e}return t.invert=function(e){return e=n.invert(e[0]*F,e[1]*F),e[0]*=B,e[1]*=B,e},t}function Ws(n,t,e,r,i,o){if(e){var s=L(t),u=H(t),l=r*e;i==null?(i=t+r*U,o=t-l/2):(i=ue(s,i),o=ue(s,o),(r>0?i<o:i>o)&&(i+=r*U));for(var f,a=i;r>0?a>o:a<o;a-=l)f=St([s,-u*L(a),-u*H(a)]),n.point(f[0],f[1])}}function ue(n,t){t=vn(t),t[0]-=n,Mt(t);var e=Ys(-t[1]);return((-t[2]<0?-e:e)+U-b)%U}function We(){var n=[],t;return{point:function(e,r,i){t.push([e,r,i])},lineStart:function(){n.push(t=[])},lineEnd:En,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Yn(n,t){return k(n[0]-t[0])<b&&k(n[1]-t[1])<b}function qn(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Je(n,t,e,r,i){var o=[],s=[],u,l;if(n.forEach(function(d){if(!((m=d.length-1)<=0)){var m,v=d[0],M=d[m],w;if(Yn(v,M)){if(!v[2]&&!M[2]){for(i.lineStart(),u=0;u<m;++u)i.point((v=d[u])[0],v[1]);i.lineEnd();return}M[0]+=2*b}o.push(w=new qn(v,d,null,!0)),s.push(w.o=new qn(v,null,w,!1)),o.push(w=new qn(M,d,null,!1)),s.push(w.o=new qn(M,null,w,!0))}}),!!o.length){for(s.sort(t),le(o),le(s),u=0,l=s.length;u<l;++u)s[u].e=e=!e;for(var f=o[0],a,c;;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;a=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(u=0,l=a.length;u<l;++u)i.point((c=a[u])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(a=h.p.z,u=a.length-1;u>=0;--u)i.point((c=a[u])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,a=h.z,p=!p}while(!h.v);i.lineEnd()}}}function le(n){if(t=n.length){for(var t,e=0,r=n[0],i;++e<t;)r.n=i=n[e],i.p=r,r=i;r.n=i=n[0],i.p=r}}function ct(n){return k(n[0])<=A?n[0]:Gs(n[0])*((k(n[0])+A)%U-A)}function Js(n,t){var e=ct(t),r=t[1],i=H(r),o=[H(e),-L(e),0],s=0,u=0,l=new Er;i===1?r=z+b:i===-1&&(r=-z-b);for(var f=0,a=n.length;f<a;++f)if(h=(c=n[f]).length)for(var c,h,p=c[h-1],d=ct(p),m=p[1]/2+te,v=H(m),M=L(m),w=0;w<h;++w,d=y,v=S,M=R,p=_){var _=c[w],y=ct(_),x=_[1]/2+te,S=H(x),R=L(x),C=y-d,P=C>=0?1:-1,$=P*C,E=$>A,D=v*S;if(l.add(Tn(D*P*H($),M*R+D*L($))),s+=E?C+P*U:C,E^d>=e^y>=e){var I=nt(vn(p),vn(_));Mt(I);var T=nt(o,I);Mt(T);var g=(E^C>=0?-1:1)*bn(T[2]);(r>g||r===g&&(I[0]||I[1]))&&(u+=E^C>=0?1:-1)}}return(s<-b||s<b&&l<-qs)^u&1}function Qe(n,t,e,r){return function(i){var o=t(i),s=We(),u=t(s),l=!1,f,a,c,h={point:p,lineStart:m,lineEnd:v,polygonStart:function(){h.point=M,h.lineStart=w,h.lineEnd=_,a=[],f=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=v,a=xe(a);var y=Js(f,r);a.length?(l||(i.polygonStart(),l=!0),Je(a,Zs,y,e,i)):y&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=f=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(y,x){n(y,x)&&i.point(y,x)}function d(y,x){o.point(y,x)}function m(){h.point=d,o.lineStart()}function v(){h.point=p,o.lineEnd()}function M(y,x){c.push([y,x]),u.point(y,x)}function w(){u.lineStart(),c=[]}function _(){M(c[0][0],c[0][1]),u.lineEnd();var y=u.clean(),x=s.result(),S,R=x.length,C,P,$;if(c.pop(),f.push(c),c=null,!!R){if(y&1){if(P=x[0],(C=P.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<C;++S)i.point(($=P[S])[0],$[1]);i.lineEnd()}return}R>1&&y&2&&x.push(x.pop().concat(x.shift())),a.push(x.filter(Qs))}}return h}}function Qs(n){return n.length>1}function Zs(n,t){return((n=n.x)[0]<0?n[1]-z-b:z-n[1])-((t=t.x)[0]<0?t[1]-z-b:z-t[1])}const fe=Qe(function(){return!0},js,ta,[-A,-z]);function js(n){var t=NaN,e=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var u=o>0?A:-A,l=k(o-t);k(l-A)<b?(n.point(t,e=(e+s)/2>0?z:-z),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(u,e),n.point(o,e),i=0):r!==u&&l>=A&&(k(t-r)<b&&(t-=r*b),k(o-u)<b&&(o-=u*b),e=na(t,e,o,s),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(u,e),i=0),n.point(t=o,e=s),r=u},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-i}}}function na(n,t,e,r){var i,o,s=H(n-e);return k(s)>b?Ue((H(t)*(o=L(r))*H(e)-H(r)*(i=L(t))*H(n))/(i*o*s)):(t+r)/2}function ta(n,t,e,r){var i;if(n==null)i=e*z,r.point(-A,i),r.point(0,i),r.point(A,i),r.point(A,0),r.point(A,-i),r.point(0,-i),r.point(-A,-i),r.point(-A,0),r.point(-A,i);else if(k(n[0]-t[0])>b){var o=n[0]<t[0]?A:-A;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function ea(n){var t=L(n),e=2*F,r=t>0,i=k(t)>b;function o(a,c,h,p){Ws(p,n,e,h,a,c)}function s(a,c){return L(a)*L(c)>t}function u(a){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(v,M){var w=[v,M],_,y=s(v,M),x=r?y?0:f(v,M):y?f(v+(v<0?A:-A),M):0;if(!c&&(d=p=y)&&a.lineStart(),y!==p&&(_=l(c,w),(!_||Yn(c,_)||Yn(w,_))&&(w[2]=1)),y!==p)m=0,y?(a.lineStart(),_=l(w,c),a.point(_[0],_[1])):(_=l(c,w),a.point(_[0],_[1],2),a.lineEnd()),c=_;else if(i&&c&&r^y){var S;!(x&h)&&(S=l(w,c,!0))&&(m=0,r?(a.lineStart(),a.point(S[0][0],S[0][1]),a.point(S[1][0],S[1][1]),a.lineEnd()):(a.point(S[1][0],S[1][1]),a.lineEnd(),a.lineStart(),a.point(S[0][0],S[0][1],3)))}y&&(!c||!Yn(c,w))&&a.point(w[0],w[1]),c=w,p=y,h=x},lineEnd:function(){p&&a.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function l(a,c,h){var p=vn(a),d=vn(c),m=[1,0,0],v=nt(p,d),M=Vn(v,v),w=v[0],_=M-w*w;if(!_)return!h&&a;var y=t*M/_,x=-t*w/_,S=nt(m,v),R=Dn(m,y),C=Dn(v,x);ft(R,C);var P=S,$=Vn(R,P),E=Vn(P,P),D=$*$-E*(Vn(R,R)-1);if(!(D<0)){var I=st(D),T=Dn(P,(-$-I)/E);if(ft(T,R),T=St(T),!h)return T;var g=a[0],N=c[0],V=a[1],q=c[1],Y;N<g&&(Y=g,g=N,N=Y);var yn=N-g,nn=k(yn-A)<b,sn=nn||yn<b;if(!nn&&q<V&&(Y=V,V=q,q=Y),sn?nn?V+q>0^T[1]<(k(T[0]-g)<b?V:q):V<=T[1]&&T[1]<=q:yn>A^(g<=T[0]&&T[0]<=N)){var tn=Dn(P,(-$+I)/E);return ft(tn,R),[T,St(tn)]}}}function f(a,c){var h=r?n:A-n,p=0;return a<-h?p|=1:a>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return Qe(s,u,o,r?[0,-n]:[-A,n-A])}function ra(n,t,e,r,i,o){var s=n[0],u=n[1],l=t[0],f=t[1],a=0,c=1,h=l-s,p=f-u,d;if(d=e-s,!(!h&&d>0)){if(d/=h,h<0){if(d<a)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>a&&(a=d)}if(d=i-s,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>a&&(a=d)}else if(h>0){if(d<a)return;d<c&&(c=d)}if(d=r-u,!(!p&&d>0)){if(d/=p,p<0){if(d<a)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>a&&(a=d)}if(d=o-u,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>a&&(a=d)}else if(p>0){if(d<a)return;d<c&&(c=d)}return a>0&&(n[0]=s+a*h,n[1]=u+a*p),c<1&&(t[0]=s+c*h,t[1]=u+c*p),!0}}}}}var Sn=1e9,Xn=-Sn;function ia(n,t,e,r){function i(f,a){return n<=f&&f<=e&&t<=a&&a<=r}function o(f,a,c,h){var p=0,d=0;if(f==null||(p=s(f,c))!==(d=s(a,c))||l(f,a)<0^c>0)do h.point(p===0||p===3?n:e,p>1?r:t);while((p=(p+c+4)%4)!==d);else h.point(a[0],a[1])}function s(f,a){return k(f[0]-n)<b?a>0?0:3:k(f[0]-e)<b?a>0?2:1:k(f[1]-t)<b?a>0?1:0:a>0?3:2}function u(f,a){return l(f.x,a.x)}function l(f,a){var c=s(f,1),h=s(a,1);return c!==h?c-h:c===0?a[1]-f[1]:c===1?f[0]-a[0]:c===2?f[1]-a[1]:a[0]-f[0]}return function(f){var a=f,c=We(),h,p,d,m,v,M,w,_,y,x,S,R={point:C,lineStart:D,lineEnd:I,polygonStart:$,polygonEnd:E};function C(g,N){i(g,N)&&a.point(g,N)}function P(){for(var g=0,N=0,V=p.length;N<V;++N)for(var q=p[N],Y=1,yn=q.length,nn=q[0],sn,tn,Ln=nn[0],cn=nn[1];Y<yn;++Y)sn=Ln,tn=cn,nn=q[Y],Ln=nn[0],cn=nn[1],tn<=r?cn>r&&(Ln-sn)*(r-tn)>(cn-tn)*(n-sn)&&++g:cn<=r&&(Ln-sn)*(r-tn)<(cn-tn)*(n-sn)&&--g;return g}function $(){a=c,h=[],p=[],S=!0}function E(){var g=P(),N=S&&g,V=(h=xe(h)).length;(N||V)&&(f.polygonStart(),N&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),V&&Je(h,u,g,o,f),f.polygonEnd()),a=f,h=p=d=null}function D(){R.point=T,p&&p.push(d=[]),x=!0,y=!1,w=_=NaN}function I(){h&&(T(m,v),M&&y&&c.rejoin(),h.push(c.result())),R.point=C,y&&a.lineEnd()}function T(g,N){var V=i(g,N);if(p&&d.push([g,N]),x)m=g,v=N,M=V,x=!1,V&&(a.lineStart(),a.point(g,N));else if(V&&y)a.point(g,N);else{var q=[w=Math.max(Xn,Math.min(Sn,w)),_=Math.max(Xn,Math.min(Sn,_))],Y=[g=Math.max(Xn,Math.min(Sn,g)),N=Math.max(Xn,Math.min(Sn,N))];ra(q,Y,n,t,e,r)?(y||(a.lineStart(),a.point(q[0],q[1])),a.point(Y[0],Y[1]),V||a.lineEnd(),S=!1):V&&(a.lineStart(),a.point(g,N),S=!1)}w=g,_=N,y=V}return R}}const ce=n=>n;var mn=1/0,tt=mn,$n=-mn,et=$n,he={point:oa,lineStart:En,lineEnd:En,polygonStart:En,polygonEnd:En,result:function(){var n=[[mn,tt],[$n,et]];return $n=et=-(tt=mn=1/0),n}};function oa(n,t){n<mn&&(mn=n),n>$n&&($n=n),t<tt&&(tt=t),t>et&&(et=t)}function It(n){return function(t){var e=new Ct;for(var r in n)e[r]=n[r];return e.stream=t,e}}function Ct(){}Ct.prototype={constructor:Ct,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Lt(n,t,e){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),Us(e,n.stream(he)),t(he.result()),r!=null&&n.clipExtent(r),n}function Ze(n,t,e){return Lt(n,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),u=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;n.scale(150*s).translate([u,l])},e)}function sa(n,t,e){return Ze(n,[[0,0],t],e)}function aa(n,t,e){return Lt(n,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,u=-o*r[0][1];n.scale(150*o).translate([s,u])},e)}function ua(n,t,e){return Lt(n,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],u=(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([s,u])},e)}var pe=16,la=L(30*F);function de(n,t){return+t?ca(n,t):fa(n)}function fa(n){return It({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function ca(n,t){function e(r,i,o,s,u,l,f,a,c,h,p,d,m,v){var M=f-r,w=a-i,_=M*M+w*w;if(_>4*t&&m--){var y=s+h,x=u+p,S=l+d,R=st(y*y+x*x+S*S),C=bn(S/=R),P=k(k(S)-1)<b||k(o-c)<b?(o+c)/2:Tn(x,y),$=n(P,C),E=$[0],D=$[1],I=E-r,T=D-i,g=w*I-M*T;(g*g/_>t||k((M*I+w*T)/_-.5)>.3||s*h+u*p+l*d<la)&&(e(r,i,o,s,u,l,E,D,P,y/=R,x/=R,S,m,v),v.point(E,D),e(E,D,P,y,x,S,f,a,c,h,p,d,m,v))}}return function(r){var i,o,s,u,l,f,a,c,h,p,d,m,v={point:M,lineStart:w,lineEnd:y,polygonStart:function(){r.polygonStart(),v.lineStart=x},polygonEnd:function(){r.polygonEnd(),v.lineStart=w}};function M(C,P){C=n(C,P),r.point(C[0],C[1])}function w(){c=NaN,v.point=_,r.lineStart()}function _(C,P){var $=vn([C,P]),E=n(C,P);e(c,h,a,p,d,m,c=E[0],h=E[1],a=C,p=$[0],d=$[1],m=$[2],pe,r),r.point(c,h)}function y(){v.point=M,r.lineEnd()}function x(){w(),v.point=S,v.lineEnd=R}function S(C,P){_(i=C,P),o=c,s=h,u=p,l=d,f=m,v.point=_}function R(){e(c,h,a,p,d,m,o,s,i,u,l,f,pe,r),v.lineEnd=y,y()}return v}}var ha=It({point:function(n,t){this.stream.point(n*F,t*F)}});function pa(n){return It({point:function(t,e){var r=n(t,e);return this.stream.point(r[0],r[1])}})}function da(n,t,e,r,i){function o(s,u){return s*=r,u*=i,[t+n*s,e-n*u]}return o.invert=function(s,u){return[(s-t)/n*r,(e-u)/n*i]},o}function ge(n,t,e,r,i,o){if(!o)return da(n,t,e,r,i);var s=L(o),u=H(o),l=s*n,f=u*n,a=s/n,c=u/n,h=(u*e-s*t)/n,p=(u*t+s*e)/n;function d(m,v){return m*=r,v*=i,[l*m-f*v+t,e-f*m-l*v]}return d.invert=function(m,v){return[r*(a*m-c*v+h),i*(p-c*m-a*v)]},d}function ga(n){return va(function(){return n})()}function va(n){var t,e=150,r=480,i=250,o=0,s=0,u=0,l=0,f=0,a,c=0,h=1,p=1,d=null,m=fe,v=null,M,w,_,y=ce,x=.5,S,R,C,P,$;function E(g){return C(g[0]*F,g[1]*F)}function D(g){return g=C.invert(g[0],g[1]),g&&[g[0]*B,g[1]*B]}E.stream=function(g){return P&&$===g?P:P=ha(pa(a)(m(S(y($=g)))))},E.preclip=function(g){return arguments.length?(m=g,d=void 0,T()):m},E.postclip=function(g){return arguments.length?(y=g,v=M=w=_=null,T()):y},E.clipAngle=function(g){return arguments.length?(m=+g?ea(d=g*F):(d=null,fe),T()):d*B},E.clipExtent=function(g){return arguments.length?(y=g==null?(v=M=w=_=null,ce):ia(v=+g[0][0],M=+g[0][1],w=+g[1][0],_=+g[1][1]),T()):v==null?null:[[v,M],[w,_]]},E.scale=function(g){return arguments.length?(e=+g,I()):e},E.translate=function(g){return arguments.length?(r=+g[0],i=+g[1],I()):[r,i]},E.center=function(g){return arguments.length?(o=g[0]%360*F,s=g[1]%360*F,I()):[o*B,s*B]},E.rotate=function(g){return arguments.length?(u=g[0]%360*F,l=g[1]%360*F,f=g.length>2?g[2]%360*F:0,I()):[u*B,l*B,f*B]},E.angle=function(g){return arguments.length?(c=g%360*F,I()):c*B},E.reflectX=function(g){return arguments.length?(h=g?-1:1,I()):h<0},E.reflectY=function(g){return arguments.length?(p=g?-1:1,I()):p<0},E.precision=function(g){return arguments.length?(S=de(R,x=g*g),T()):st(x)},E.fitExtent=function(g,N){return Ze(E,g,N)},E.fitSize=function(g,N){return sa(E,g,N)},E.fitWidth=function(g,N){return aa(E,g,N)},E.fitHeight=function(g,N){return ua(E,g,N)};function I(){var g=ge(e,0,0,h,p,c).apply(null,t(o,s)),N=ge(e,r-g[0],i-g[1],h,p,c);return a=Ke(u,l,f),R=Nt(t,N),C=Nt(a,R),S=de(R,x),T()}function T(){return P=$=null,E}return function(){return t=n.apply(this,arguments),E.invert=t.invert&&D,I()}}function Ht(n,t){return[n,zs(Bs((z+t)/2))]}Ht.invert=function(n,t){return[n,2*Ue(Xs(t))-z]};function ma(){return ya(Ht).scale(961/U)}function ya(n){var t=ga(n),e=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,u,l,f;t.scale=function(c){return arguments.length?(r(c),a()):r()},t.translate=function(c){return arguments.length?(i(c),a()):i()},t.center=function(c){return arguments.length?(e(c),a()):e()},t.clipExtent=function(c){return arguments.length?(c==null?s=u=l=f=null:(s=+c[0][0],u=+c[0][1],l=+c[1][0],f=+c[1][1]),a()):s==null?null:[[s,u],[l,f]]};function a(){var c=A*r(),h=t(Ks(t.rotate()).invert([0,0]));return o(s==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:n===Ht?[[Math.max(h[0]-c,s),u],[Math.min(h[0]+c,l),f]]:[[s,Math.max(h[1]-c,u)],[l,Math.min(h[1]+c,f)]])}return a()}function Mn(n,t,e){this.k=n,this.x=t,this.y=e}Mn.prototype={constructor:Mn,scale:function(n){return n===1?this:new Mn(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Mn(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Mn.prototype;const pn=ma().center([104,37.5]).scale(80).translate([0,0]),wa=({start:n,end:t})=>{const[e,r]=an.useState([]),i=an.useRef();return an.useEffect(()=>{r(((s,u)=>{let l=xr(pt(s),pt(u));const f=pn(s),a=pn(l.geometry.coordinates),c=pn(u),h=new at(f[0],-f[1],0),p=new at(a[0],-a[1],4),d=new at(c[0],-c[1],0);return new lr([h,p,d],!1,"catmullrom",.5).getPoints(50)})(n,t))},[]),ar(o=>{const u=o.clock.getElapsedTime()/4%1,l=e[Math.floor(u*e.length)];i.current&&i.current.position.copy(l)}),e.length?O.jsxs(O.Fragment,{children:[O.jsx(ye,{points:e,color:"green",opacity:.8}),O.jsx(pr,{ref:i,"material-color":"red",args:[.4]})]}):null};function _a(){ir();const n=or(ur,tr+"/geo/china.json"),[t,e]=an.useState([]),[r,i]=an.useState([[[116.419951,40.18994],[116.419951,41.56]],[[116.419951,40.18994],[116.419951,34.56]],[[116.419951,40.18994],[100.2,40.18994]],[[116.419951,40.18994],[120.2,40.18994]],[[116.419951,40.18994],[116.419951,30.18994]]]);an.useEffect(()=>{let l=JSON.parse(n);const f=[];(c=>{c.features.pop(),c.features.forEach(h=>{const p=h.properties.name,d=pn(h.properties.centroid||h.properties.center),m=h.geometry.coordinates,v=[];m.forEach((M,w)=>{M.forEach(_=>{if(h.geometry.type=="Polygon"){const[y,x]=pn(_);let S=new Ft(y,-x);v.push(S);return}if(!(w>0))for(let y=0;y<_.length;y++){const[x,S]=pn(_[y]);let R=new Ft(x,-S);v.push(R)}})}),f.push({name:p,position:d,shapes:v})})})(l),e(f)},[]);const[o,s]=an.useState(!1),u=(l,f)=>{const a=document.createElement("div");a.innerHTML=f.name,a.style.position="absolute",a.style.top=l.clientY+"px",a.style.left=l.clientX+"px",window.document.body.append(a),setTimeout(()=>{a.remove()},1e3)};return O.jsxs("group",{position:[-15,0,0],children:[r.map((l,f)=>O.jsx(wa,{start:l[0],end:l[1]})),t.map((l,f)=>{let a=new ht(65025+f*10);return f===o&&(a=16776960),l.name==="北京市"&&(a=new ht(16711680),a.setRGB(.5,0,0)),O.jsxs("mesh",{onClick:c=>{u(c,l)},onPointerOver:c=>{s(c)},children:[O.jsx(ye,{points:l.shapes,color:"red"}),O.jsx(hr,{position:[0,0,-1.2],"material-color":a,args:[new sr(l.shapes)]}),O.jsx(dr,{position:[l.position[0],-l.position[1],.1],scale:.4,color:"red",children:l.name},f)]},l.name)})]})}const xa=()=>O.jsxs(er,{shadows:!0,dpr:[1,2],style:{height:"60vh"},gl:{alpha:!1},scene:{background:new ht(16777215)},camera:{position:[0,-50,50],fov:45},children:[O.jsx(rr,{}),O.jsx(fr,{children:O.jsx(cr,{axisColors:["red","green","blue"],labelColor:"black"})}),O.jsx("ambientLight",{intensity:Math.PI}),O.jsx(_a,{})]}),Ea=`import { staticPath } from '@/utils'
import {
  Extrude,
  GizmoHelper,
  GizmoViewport,
  Line,
  OrbitControls,
  Sphere,
  Text,
} from '@react-three/drei'
import { Canvas, useFrame, useLoader, useThree } from '@react-three/fiber'
import * as turf from '@turf/turf'
import * as d3 from 'd3'
import React, { useEffect, useRef, useState } from 'react'
import * as THREE from 'three'

const projection = d3
  .geoMercator()
  .center([104.0, 37.5])
  .scale(80)
  .translate([0, 0])

const FlyLine = ({ start, end }) => {
  const [curvePoints, setCurvePoints] = useState([])
  const pointRef = useRef()
  useEffect(() => {
    const generateCurve = (start, end) => {
      let midpoint = turf.midpoint(turf.point(start), turf.point(end))
      // 生成线
      const startP = projection(start)

      const centerP = projection(midpoint.geometry.coordinates)
      const endP = projection(end)

      const startVector3 = new THREE.Vector3(startP[0], -startP[1], 0)
      const centerVector3 = new THREE.Vector3(centerP[0], -centerP[1], 4)
      const endVector3 = new THREE.Vector3(endP[0], -endP[1], 0)
      const curve3 = new THREE.CatmullRomCurve3(
        [startVector3, centerVector3, endVector3],
        false,
        'catmullrom',
        0.5
      )
      return curve3.getPoints(50)
    }
    setCurvePoints(generateCurve(start, end))
  }, [])
  useFrame((state) => {
    const elapsed = state.clock.getElapsedTime()
    const t = (elapsed / 4) % 1
    const point = curvePoints[Math.floor(t * curvePoints.length)]
    if (pointRef.current) {
      pointRef.current.position.copy(point)
    }
  })
  if (!curvePoints.length) return null
  return (
    <>
      <Line points={curvePoints} color="green" opacity={0.8} />
      <Sphere ref={pointRef} material-color="red" args={[0.4]} />
    </>
  )
}

function Com() {
  const { scene } = useThree()
  const data = useLoader(THREE.FileLoader, staticPath + '/geo/china.json')
  const [fonts, setFonts] = useState([])

  const [curvePoints, setCurvePoints] = useState([
    [
      [116.419951, 40.18994],
      [116.419951, 41.56],
    ],
    [
      [116.419951, 40.18994],
      [116.419951, 34.56],
    ],
    [
      [116.419951, 40.18994],
      [100.2, 40.18994],
    ],
    [
      [116.419951, 40.18994],
      [120.2, 40.18994],
    ],
    [
      [116.419951, 40.18994],
      [116.419951, 30.18994],
    ],
  ])
  useEffect(() => {
    let _data = JSON.parse(data)
    const fontsArr = []
    const generateGeometry = (jsondata) => {
      // 墨卡托投影转换
      jsondata.features.pop()
      jsondata.features.forEach((elem) => {
        const name = elem.properties.name
        const center = projection(
          elem.properties.centroid || elem.properties.center
        )
        // 每个的 坐标 数组
        const coordinates = elem.geometry.coordinates
        const shapes = []
        // 循环坐标数组
        coordinates.forEach((multiPolygon, i) => {
          multiPolygon.forEach((polygon) => {
            if (elem.geometry.type == 'Polygon') {
              const [x, y] = projection(polygon)
              let point = new THREE.Vector2(x, -y)
              shapes.push(point)
              return
            }
            if (i > 0) return
            for (let i = 0; i < polygon.length; i++) {
              const [x, y] = projection(polygon[i])
              let point = new THREE.Vector2(x, -y)
              shapes.push(point)
            }
          })
        })
        fontsArr.push({
          name,
          position: center,
          shapes,
        })
      })
    }
    generateGeometry(_data)
    setFonts(fontsArr)
  }, [])

  const [checked, setChecked] = useState(false)
  const generateTip = (i, item) => {
    const div = document.createElement('div')
    div.innerHTML = item.name
    div.style.position = 'absolute'
    div.style.top = i.clientY + 'px'
    div.style.left = i.clientX + 'px'
    window.document.body.append(div)
    setTimeout(() => {
      div.remove()
    }, 1000)
  }

  return (
    <group position={[-15, 0, 0]}>
      {curvePoints.map((item, i) => (
        <FlyLine start={item[0]} end={item[1]} />
      ))}
      {fonts.map((item, i) => {
        let color = new THREE.Color(255 * 255 + i * 10)
        if (i === checked) {
          color = 0xffff00
        }
        if (item.name === '北京市') {
          color = new THREE.Color(0xff0000)
          color.setRGB(0.5, 0, 0)
        }
        return (
          <mesh
            key={item.name}
            onClick={(e) => {
              generateTip(e, item)
            }}
            onPointerOver={(i) => {
              setChecked(i)
            }}
          >
            <Line points={item.shapes} color="red" />
            <Extrude
              position={[0, 0, -1.2]}
              material-color={color}
              args={[new THREE.Shape(item.shapes)]}
            ></Extrude>

            <Text
              position={[item.position[0], -item.position[1], 0.1]}
              key={i}
              scale={0.4}
              color="red"
            >
              {item.name}
            </Text>
          </mesh>
        )
      })}
    </group>
  )
}

const Geo = () => {
  return (
    <Canvas
      shadows
      dpr={[1, 2]}
      style={{ height: '60vh' }}
      gl={{ alpha: false }}
      scene={{ background: new THREE.Color(0xffffff) }}
      camera={{ position: [0, -50, 50], fov: 45 }}
    >
      <OrbitControls />
      {/* <axesHelper args={[10]} /> */}
      <GizmoHelper>
        <GizmoViewport
          axisColors={['red', 'green', 'blue']}
          labelColor="black"
        />
      </GizmoHelper>
      <ambientLight intensity={Math.PI} />
      <Com />
    </Canvas>
  )
}
export default Geo
`,Sa=void 0,Ma=void 0,Na={code:Ea,title:Sa,desc:Ma},Aa=!0,Ca=Object.freeze(Object.defineProperty({__proto__:null,default:xa,demoMeta:Na,isDemo:Aa},Symbol.toStringTag,{value:"Module"}));function ve(n){const{Demo:t}={...me(),...n.components};return t||Ra("Demo"),O.jsx(t,{...Ca})}function Pa(n={}){const{wrapper:t}={...me(),...n.components};return t?O.jsx(t,{...n,children:O.jsx(ve,{...n})}):ve(n)}function Ra(n,t){throw new Error("Expected component `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}const Ta=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),je={};je.outlineInfo=nr;je.main=Ta;export{je as default};
