import{p as Ge}from"./geo_-FU1-d8Ot.js";import{j as X,r as et,u as ae}from"./ssg-client-6fRm9a0X.js";import{s as Ve}from"./index-CSwHO5PT.js";import{C as Ye,a as fe,O as Be,d as Ue,c as Ke,S as We,F as Je,e as Tt}from"./OrbitControls-B_KtH_Qm.js";import{G as Qe,a as Ze}from"./GizmoViewport-DTYPgPlf.js";import{L as je}from"./Line-SqoUChrR.js";import{E as nr}from"./shapes-CqVEHclL.js";import{T as tr}from"./Text-BdYVnltl.js";import"./Hud-BekHJm_x.js";class er{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(e[r++]=a),t=s}return e[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let e=this._n,r,i,o,s=0;if(e>0){for(s=t[--e];e>0&&(r=s,i=t[--e],s=r+i,o=i-(s-r),!o););e>0&&(o<0&&t[e-1]<0||o>0&&t[e-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}function*rr(n){for(const t of n)yield*t}function le(n){return Array.from(rr(n))}var ir={value:()=>{}};function ce(){for(var n=0,t=arguments.length,e={},r;n<t;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new On(e)}function On(n){this._=n}function or(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}On.prototype=ce.prototype={constructor:On,on:function(n,t){var e=this._,r=or(n+"",e),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=sr(e[i],n.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(n=r[o]).type)e[i]=Rt(e[i],n.name,t);else if(t==null)for(i in e)e[i]=Rt(e[i],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new On(n)},call:function(n,t){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};function sr(n,t){for(var e=0,r=n.length,i;e<r;++e)if((i=n[e]).name===t)return i.value}function Rt(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=ir,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}var ut="http://www.w3.org/1999/xhtml";const bt={svg:"http://www.w3.org/2000/svg",xhtml:ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zn(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),bt.hasOwnProperty(t)?{space:bt[t],local:n}:n}function ur(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===ut&&t.documentElement.namespaceURI===ut?t.createElement(n):t.createElementNS(e,n)}}function ar(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function he(n){var t=Zn(n);return(t.local?ar:ur)(t)}function fr(){}function mt(n){return n==null?fr:function(){return this.querySelector(n)}}function lr(n){typeof n!="function"&&(n=mt(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),f,l,u=0;u<s;++u)(f=o[u])&&(l=n.call(f,f.__data__,u,o))&&("__data__"in f&&(l.__data__=f.__data__),a[u]=l);return new K(r,this._parents)}function cr(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function hr(){return[]}function pe(n){return n==null?hr:function(){return this.querySelectorAll(n)}}function pr(n){return function(){return cr(n.apply(this,arguments))}}function gr(n){typeof n=="function"?n=pr(n):n=pe(n);for(var t=this._groups,e=t.length,r=[],i=[],o=0;o<e;++o)for(var s=t[o],a=s.length,f,l=0;l<a;++l)(f=s[l])&&(r.push(n.call(f,f.__data__,l,s)),i.push(f));return new K(r,i)}function ge(n){return function(){return this.matches(n)}}function de(n){return function(t){return t.matches(n)}}var dr=Array.prototype.find;function vr(n){return function(){return dr.call(this.children,n)}}function _r(){return this.firstElementChild}function yr(n){return this.select(n==null?_r:vr(typeof n=="function"?n:de(n)))}var wr=Array.prototype.filter;function mr(){return Array.from(this.children)}function xr(n){return function(){return wr.call(this.children,n)}}function Er(n){return this.selectAll(n==null?mr:xr(typeof n=="function"?n:de(n)))}function Sr(n){typeof n!="function"&&(n=ge(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o=t[i],s=o.length,a=r[i]=[],f,l=0;l<s;++l)(f=o[l])&&n.call(f,f.__data__,l,o)&&a.push(f);return new K(r,this._parents)}function ve(n){return new Array(n.length)}function Nr(){return new K(this._enter||this._groups.map(ve),this._parents)}function qn(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}qn.prototype={constructor:qn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Ar(n){return function(){return n}}function Mr(n,t,e,r,i,o){for(var s=0,a,f=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):e[s]=new qn(n,o[s]);for(;s<f;++s)(a=t[s])&&(i[s]=a)}function Cr(n,t,e,r,i,o,s){var a,f,l=new Map,u=t.length,c=o.length,h=new Array(u),p;for(a=0;a<u;++a)(f=t[a])&&(h[a]=p=s.call(f,f.__data__,a,t)+"",l.has(p)?i[a]=f:l.set(p,f));for(a=0;a<c;++a)p=s.call(n,o[a],a,o)+"",(f=l.get(p))?(r[a]=f,f.__data__=o[a],l.delete(p)):e[a]=new qn(n,o[a]);for(a=0;a<u;++a)(f=t[a])&&l.get(h[a])===f&&(i[a]=f)}function $r(n){return n.__data__}function Tr(n,t){if(!arguments.length)return Array.from(this,$r);var e=t?Cr:Mr,r=this._parents,i=this._groups;typeof n!="function"&&(n=Ar(n));for(var o=i.length,s=new Array(o),a=new Array(o),f=new Array(o),l=0;l<o;++l){var u=r[l],c=i[l],h=c.length,p=Rr(n.call(u,u&&u.__data__,l,r)),g=p.length,_=a[l]=new Array(g),v=s[l]=new Array(g),S=f[l]=new Array(h);e(u,c,_,v,S,p,t);for(var y=0,m=0,w,x;y<g;++y)if(w=_[y]){for(y>=m&&(m=y+1);!(x=v[m])&&++m<g;);w._next=x||null}}return s=new K(s,r),s._enter=a,s._exit=f,s}function Rr(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function br(){return new K(this._exit||this._groups.map(ve),this._parents)}function kr(n,t,e){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),t!=null&&(i=t(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Pr(n){for(var t=n.selection?n.selection():n,e=this._groups,r=t._groups,i=e.length,o=r.length,s=Math.min(i,o),a=new Array(i),f=0;f<s;++f)for(var l=e[f],u=r[f],c=l.length,h=a[f]=new Array(c),p,g=0;g<c;++g)(p=l[g]||u[g])&&(h[g]=p);for(;f<i;++f)a[f]=e[f];return new K(a,this._parents)}function Ir(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var r=n[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Hr(n){n||(n=Lr);function t(c,h){return c&&h?n(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var s=e[o],a=s.length,f=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(f[u]=l);f.sort(t)}return new K(i,this._parents).order()}function Lr(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Fr(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Or(){return Array.from(this)}function Dr(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function zr(){let n=0;for(const t of this)++n;return n}function Xr(){return!this.node()}function qr(n){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],o=0,s=i.length,a;o<s;++o)(a=i[o])&&n.call(a,a.__data__,o,i);return this}function Gr(n){return function(){this.removeAttribute(n)}}function Vr(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Yr(n,t){return function(){this.setAttribute(n,t)}}function Br(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function Ur(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function Kr(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Wr(n,t){var e=Zn(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((t==null?e.local?Vr:Gr:typeof t=="function"?e.local?Kr:Ur:e.local?Br:Yr)(e,t))}function _e(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Jr(n){return function(){this.style.removeProperty(n)}}function Qr(n,t,e){return function(){this.style.setProperty(n,t,e)}}function Zr(n,t,e){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function jr(n,t,e){return arguments.length>1?this.each((t==null?Jr:typeof t=="function"?Zr:Qr)(n,t,e??"")):ln(this.node(),n)}function ln(n,t){return n.style.getPropertyValue(t)||_e(n).getComputedStyle(n,null).getPropertyValue(t)}function ni(n){return function(){delete this[n]}}function ti(n,t){return function(){this[n]=t}}function ei(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function ri(n,t){return arguments.length>1?this.each((t==null?ni:typeof t=="function"?ei:ti)(n,t)):this.node()[n]}function ye(n){return n.trim().split(/^|\s+/)}function xt(n){return n.classList||new we(n)}function we(n){this._node=n,this._names=ye(n.getAttribute("class")||"")}we.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function me(n,t){for(var e=xt(n),r=-1,i=t.length;++r<i;)e.add(t[r])}function xe(n,t){for(var e=xt(n),r=-1,i=t.length;++r<i;)e.remove(t[r])}function ii(n){return function(){me(this,n)}}function oi(n){return function(){xe(this,n)}}function si(n,t){return function(){(t.apply(this,arguments)?me:xe)(this,n)}}function ui(n,t){var e=ye(n+"");if(arguments.length<2){for(var r=xt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof t=="function"?si:t?ii:oi)(e,t))}function ai(){this.textContent=""}function fi(n){return function(){this.textContent=n}}function li(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function ci(n){return arguments.length?this.each(n==null?ai:(typeof n=="function"?li:fi)(n)):this.node().textContent}function hi(){this.innerHTML=""}function pi(n){return function(){this.innerHTML=n}}function gi(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function di(n){return arguments.length?this.each(n==null?hi:(typeof n=="function"?gi:pi)(n)):this.node().innerHTML}function vi(){this.nextSibling&&this.parentNode.appendChild(this)}function _i(){return this.each(vi)}function yi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wi(){return this.each(yi)}function mi(n){var t=typeof n=="function"?n:he(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xi(){return null}function Ei(n,t){var e=typeof n=="function"?n:he(n),r=t==null?xi:typeof t=="function"?t:mt(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Si(){var n=this.parentNode;n&&n.removeChild(this)}function Ni(){return this.each(Si)}function Ai(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Mi(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Ci(n){return this.select(n?Mi:Ai)}function $i(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Ti(n){return function(t){n.call(this,t,this.__data__)}}function Ri(n){return n.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}})}function bi(n){return function(){var t=this.__on;if(t){for(var e=0,r=-1,i=t.length,o;e<i;++e)o=t[e],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function ki(n,t,e){return function(){var r=this.__on,i,o=Ti(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=t;return}}this.addEventListener(n.type,o,e),i={type:n.type,name:n.name,value:t,listener:o,options:e},r?r.push(i):this.__on=[i]}}function Pi(n,t,e){var r=Ri(n+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var f=0,l=a.length,u;f<l;++f)for(i=0,u=a[f];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?ki:bi,i=0;i<o;++i)this.each(a(r[i],t,e));return this}function Ee(n,t,e){var r=_e(n),i=r.CustomEvent;typeof i=="function"?i=new i(t,e):(i=r.document.createEvent("Event"),e?(i.initEvent(t,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(t,!1,!1)),n.dispatchEvent(i)}function Ii(n,t){return function(){return Ee(this,n,t)}}function Hi(n,t){return function(){return Ee(this,n,t.apply(this,arguments))}}function Li(n,t){return this.each((typeof t=="function"?Hi:Ii)(n,t))}function*Fi(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Oi=[null];function K(n,t){this._groups=n,this._parents=t}function $n(){return new K([[document.documentElement]],Oi)}function Di(){return this}K.prototype=$n.prototype={constructor:K,select:lr,selectAll:gr,selectChild:yr,selectChildren:Er,filter:Sr,data:Tr,enter:Nr,exit:br,join:kr,merge:Pr,selection:Di,order:Ir,sort:Hr,call:Fr,nodes:Or,node:Dr,size:zr,empty:Xr,each:qr,attr:Wr,style:jr,property:ri,classed:ui,text:ci,html:di,raise:_i,lower:wi,append:mi,insert:Ei,remove:Ni,clone:Ci,datum:$i,on:Pi,dispatch:Li,[Symbol.iterator]:Fi};function Et(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Se(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function Tn(){}var xn=.7,Gn=1/xn,fn="\\s*([+-]?\\d+)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zi=/^#([0-9a-f]{3,8})$/,Xi=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),qi=new RegExp(`^rgb\\(${J},${J},${J}\\)$`),Gi=new RegExp(`^rgba\\(${fn},${fn},${fn},${En}\\)$`),Vi=new RegExp(`^rgba\\(${J},${J},${J},${En}\\)$`),Yi=new RegExp(`^hsl\\(${En},${J},${J}\\)$`),Bi=new RegExp(`^hsla\\(${En},${J},${J},${En}\\)$`),kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Et(Tn,Sn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Pt,formatHex:Pt,formatHex8:Ui,formatHsl:Ki,formatRgb:It,toString:It});function Pt(){return this.rgb().formatHex()}function Ui(){return this.rgb().formatHex8()}function Ki(){return Ne(this).formatHsl()}function It(){return this.rgb().formatRgb()}function Sn(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=zi.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?Ht(t):e===3?new q(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?bn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?bn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xi.exec(n))?new q(t[1],t[2],t[3],1):(t=qi.exec(n))?new q(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gi.exec(n))?bn(t[1],t[2],t[3],t[4]):(t=Vi.exec(n))?bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yi.exec(n))?Ot(t[1],t[2]/100,t[3]/100,1):(t=Bi.exec(n))?Ot(t[1],t[2]/100,t[3]/100,t[4]):kt.hasOwnProperty(n)?Ht(kt[n]):n==="transparent"?new q(NaN,NaN,NaN,0):null}function Ht(n){return new q(n>>16&255,n>>8&255,n&255,1)}function bn(n,t,e,r){return r<=0&&(n=t=e=NaN),new q(n,t,e,r)}function Wi(n){return n instanceof Tn||(n=Sn(n)),n?(n=n.rgb(),new q(n.r,n.g,n.b,n.opacity)):new q}function at(n,t,e,r){return arguments.length===1?Wi(n):new q(n,t,e,r??1)}function q(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}Et(q,at,Se(Tn,{brighter(n){return n=n==null?Gn:Math.pow(Gn,n),new q(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?xn:Math.pow(xn,n),new q(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new q(sn(this.r),sn(this.g),sn(this.b),Vn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lt,formatHex:Lt,formatHex8:Ji,formatRgb:Ft,toString:Ft}));function Lt(){return`#${on(this.r)}${on(this.g)}${on(this.b)}`}function Ji(){return`#${on(this.r)}${on(this.g)}${on(this.b)}${on((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ft(){const n=Vn(this.opacity);return`${n===1?"rgb(":"rgba("}${sn(this.r)}, ${sn(this.g)}, ${sn(this.b)}${n===1?")":`, ${n})`}`}function Vn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function sn(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function on(n){return n=sn(n),(n<16?"0":"")+n.toString(16)}function Ot(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new U(n,t,e,r)}function Ne(n){if(n instanceof U)return new U(n.h,n.s,n.l,n.opacity);if(n instanceof Tn||(n=Sn(n)),!n)return new U;if(n instanceof U)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),o=Math.max(t,e,r),s=NaN,a=o-i,f=(o+i)/2;return a?(t===o?s=(e-r)/a+(e<r)*6:e===o?s=(r-t)/a+2:s=(t-e)/a+4,a/=f<.5?o+i:2-o-i,s*=60):a=f>0&&f<1?0:s,new U(s,a,f,n.opacity)}function Qi(n,t,e,r){return arguments.length===1?Ne(n):new U(n,t,e,r??1)}function U(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}Et(U,Qi,Se(Tn,{brighter(n){return n=n==null?Gn:Math.pow(Gn,n),new U(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?xn:Math.pow(xn,n),new U(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new q(rt(n>=240?n-240:n+120,i,r),rt(n,i,r),rt(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new U(Dt(this.h),kn(this.s),kn(this.l),Vn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Vn(this.opacity);return`${n===1?"hsl(":"hsla("}${Dt(this.h)}, ${kn(this.s)*100}%, ${kn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Dt(n){return n=(n||0)%360,n<0?n+360:n}function kn(n){return Math.max(0,Math.min(1,n||0))}function rt(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const Ae=n=>()=>n;function Zi(n,t){return function(e){return n+e*t}}function ji(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function no(n){return(n=+n)==1?Me:function(t,e){return e-t?ji(t,e,n):Ae(isNaN(t)?e:t)}}function Me(n,t){var e=t-n;return e?Zi(n,e):Ae(isNaN(n)?t:n)}const zt=function n(t){var e=no(t);function r(i,o){var s=e((i=at(i)).r,(o=at(o)).r),a=e(i.g,o.g),f=e(i.b,o.b),l=Me(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=f(u),i.opacity=l(u),i+""}}return r.gamma=n,r}(1);function en(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var ft=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,it=new RegExp(ft.source,"g");function to(n){return function(){return n}}function eo(n){return function(t){return n(t)+""}}function ro(n,t){var e=ft.lastIndex=it.lastIndex=0,r,i,o,s=-1,a=[],f=[];for(n=n+"",t=t+"";(r=ft.exec(n))&&(i=it.exec(t));)(o=i.index)>e&&(o=t.slice(e,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,f.push({i:s,x:en(r,i)})),e=it.lastIndex;return e<t.length&&(o=t.slice(e),a[s]?a[s]+=o:a[++s]=o),a.length<2?f[0]?eo(f[0].x):to(t):(t=f.length,function(l){for(var u=0,c;u<t;++u)a[(c=f[u]).i]=c.x(l);return a.join("")})}var Xt=180/Math.PI,lt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ce(n,t,e,r,i,o){var s,a,f;return(s=Math.sqrt(n*n+t*t))&&(n/=s,t/=s),(f=n*e+t*r)&&(e-=n*f,r-=t*f),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,f/=a),n*r<t*e&&(n=-n,t=-t,f=-f,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,n)*Xt,skewX:Math.atan(f)*Xt,scaleX:s,scaleY:a}}var Pn;function io(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?lt:Ce(t.a,t.b,t.c,t.d,t.e,t.f)}function oo(n){return n==null||(Pn||(Pn=document.createElementNS("http://www.w3.org/2000/svg","g")),Pn.setAttribute("transform",n),!(n=Pn.transform.baseVal.consolidate()))?lt:(n=n.matrix,Ce(n.a,n.b,n.c,n.d,n.e,n.f))}function $e(n,t,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,c,h,p,g){if(l!==c||u!==h){var _=p.push("translate(",null,t,null,e);g.push({i:_-4,x:en(l,c)},{i:_-2,x:en(u,h)})}else(c||h)&&p.push("translate("+c+t+h+e)}function s(l,u,c,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:en(l,u)})):u&&c.push(i(c)+"rotate("+u+r)}function a(l,u,c,h){l!==u?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:en(l,u)}):u&&c.push(i(c)+"skewX("+u+r)}function f(l,u,c,h,p,g){if(l!==c||u!==h){var _=p.push(i(p)+"scale(",null,",",null,")");g.push({i:_-4,x:en(l,c)},{i:_-2,x:en(u,h)})}else(c!==1||h!==1)&&p.push(i(p)+"scale("+c+","+h+")")}return function(l,u){var c=[],h=[];return l=n(l),u=n(u),o(l.translateX,l.translateY,u.translateX,u.translateY,c,h),s(l.rotate,u.rotate,c,h),a(l.skewX,u.skewX,c,h),f(l.scaleX,l.scaleY,u.scaleX,u.scaleY,c,h),l=u=null,function(p){for(var g=-1,_=h.length,v;++g<_;)c[(v=h[g]).i]=v.x(p);return c.join("")}}}var so=$e(io,"px, ","px)","deg)"),uo=$e(oo,", ",")",")"),cn=0,vn=0,dn=0,Te=1e3,Yn,_n,Bn=0,un=0,jn=0,Nn=typeof performance=="object"&&performance.now?performance:Date,Re=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function St(){return un||(Re(ao),un=Nn.now()+jn)}function ao(){un=0}function Un(){this._call=this._time=this._next=null}Un.prototype=be.prototype={constructor:Un,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?St():+e)+(t==null?0:+t),!this._next&&_n!==this&&(_n?_n._next=this:Yn=this,_n=this),this._call=n,this._time=e,ct()},stop:function(){this._call&&(this._call=null,this._time=1/0,ct())}};function be(n,t,e){var r=new Un;return r.restart(n,t,e),r}function fo(){St(),++cn;for(var n=Yn,t;n;)(t=un-n._time)>=0&&n._call.call(void 0,t),n=n._next;--cn}function qt(){un=(Bn=Nn.now())+jn,cn=vn=0;try{fo()}finally{cn=0,co(),un=0}}function lo(){var n=Nn.now(),t=n-Bn;t>Te&&(jn-=t,Bn=n)}function co(){for(var n,t=Yn,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Yn=e);_n=n,ct(r)}function ct(n){if(!cn){vn&&(vn=clearTimeout(vn));var t=n-un;t>24?(n<1/0&&(vn=setTimeout(qt,n-Nn.now()-jn)),dn&&(dn=clearInterval(dn))):(dn||(Bn=Nn.now(),dn=setInterval(lo,Te)),cn=1,Re(qt))}}function Gt(n,t,e){var r=new Un;return t=t==null?0:+t,r.restart(i=>{r.stop(),n(i+t)},t,e),r}var ho=ce("start","end","cancel","interrupt"),po=[],ke=0,Vt=1,ht=2,Dn=3,Yt=4,pt=5,zn=6;function nt(n,t,e,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(e in s)return;go(n,e,{name:t,index:r,group:i,on:ho,tween:po,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ke})}function Nt(n,t){var e=W(n,t);if(e.state>ke)throw new Error("too late; already scheduled");return e}function Q(n,t){var e=W(n,t);if(e.state>Dn)throw new Error("too late; already running");return e}function W(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function go(n,t,e){var r=n.__transition,i;r[t]=e,e.timer=be(o,0,e.time);function o(l){e.state=Vt,e.timer.restart(s,e.delay,e.time),e.delay<=l&&s(l-e.delay)}function s(l){var u,c,h,p;if(e.state!==Vt)return f();for(u in r)if(p=r[u],p.name===e.name){if(p.state===Dn)return Gt(s);p.state===Yt?(p.state=zn,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=zn,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete r[u])}if(Gt(function(){e.state===Dn&&(e.state=Yt,e.timer.restart(a,e.delay,e.time),a(l))}),e.state=ht,e.on.call("start",n,n.__data__,e.index,e.group),e.state===ht){for(e.state=Dn,i=new Array(h=e.tween.length),u=0,c=-1;u<h;++u)(p=e.tween[u].value.call(n,n.__data__,e.index,e.group))&&(i[++c]=p);i.length=c+1}}function a(l){for(var u=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(f),e.state=pt,1),c=-1,h=i.length;++c<h;)i[c].call(n,u);e.state===pt&&(e.on.call("end",n,n.__data__,e.index,e.group),f())}function f(){e.state=zn,e.timer.stop(),delete r[t];for(var l in r)return;delete n.__transition}}function vo(n,t){var e=n.__transition,r,i,o=!0,s;if(e){t=t==null?null:t+"";for(s in e){if((r=e[s]).name!==t){o=!1;continue}i=r.state>ht&&r.state<pt,r.state=zn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[s]}o&&delete n.__transition}}function _o(n){return this.each(function(){vo(this,n)})}function yo(n,t){var e,r;return function(){var i=Q(this,n),o=i.tween;if(o!==e){r=e=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function wo(n,t,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=Q(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:e},f=0,l=i.length;f<l;++f)if(i[f].name===t){i[f]=a;break}f===l&&i.push(a)}o.tween=i}}function mo(n,t){var e=this._id;if(n+="",arguments.length<2){for(var r=W(this.node(),e).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((t==null?yo:wo)(e,n,t))}function At(n,t,e){var r=n._id;return n.each(function(){var i=Q(this,r);(i.value||(i.value={}))[t]=e.apply(this,arguments)}),function(i){return W(i,r).value[t]}}function Pe(n,t){var e;return(typeof t=="number"?en:t instanceof Sn?zt:(e=Sn(t))?(t=e,zt):ro)(n,t)}function xo(n){return function(){this.removeAttribute(n)}}function Eo(n){return function(){this.removeAttributeNS(n.space,n.local)}}function So(n,t,e){var r,i=e+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=t(r=s,e)}}function No(n,t,e){var r,i=e+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=t(r=s,e)}}function Ao(n,t,e){var r,i,o;return function(){var s,a=e(this),f;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),f=a+"",s===f?null:s===r&&f===i?o:(i=f,o=t(r=s,a)))}}function Mo(n,t,e){var r,i,o;return function(){var s,a=e(this),f;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),f=a+"",s===f?null:s===r&&f===i?o:(i=f,o=t(r=s,a)))}}function Co(n,t){var e=Zn(n),r=e==="transform"?uo:Pe;return this.attrTween(n,typeof t=="function"?(e.local?Mo:Ao)(e,r,At(this,"attr."+n,t)):t==null?(e.local?Eo:xo)(e):(e.local?No:So)(e,r,t))}function $o(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function To(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Ro(n,t){var e,r;function i(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&To(n,o)),e}return i._value=t,i}function bo(n,t){var e,r;function i(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&$o(n,o)),e}return i._value=t,i}function ko(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var r=Zn(n);return this.tween(e,(r.local?Ro:bo)(r,t))}function Po(n,t){return function(){Nt(this,n).delay=+t.apply(this,arguments)}}function Io(n,t){return t=+t,function(){Nt(this,n).delay=t}}function Ho(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Po:Io)(t,n)):W(this.node(),t).delay}function Lo(n,t){return function(){Q(this,n).duration=+t.apply(this,arguments)}}function Fo(n,t){return t=+t,function(){Q(this,n).duration=t}}function Oo(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Lo:Fo)(t,n)):W(this.node(),t).duration}function Do(n,t){if(typeof t!="function")throw new Error;return function(){Q(this,n).ease=t}}function zo(n){var t=this._id;return arguments.length?this.each(Do(t,n)):W(this.node(),t).ease}function Xo(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Q(this,n).ease=e}}function qo(n){if(typeof n!="function")throw new Error;return this.each(Xo(this._id,n))}function Go(n){typeof n!="function"&&(n=ge(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o=t[i],s=o.length,a=r[i]=[],f,l=0;l<s;++l)(f=o[l])&&n.call(f,f.__data__,l,o)&&a.push(f);return new tn(r,this._parents,this._name,this._id)}function Vo(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,r=t.length,i=e.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var f=t[a],l=e[a],u=f.length,c=s[a]=new Array(u),h,p=0;p<u;++p)(h=f[p]||l[p])&&(c[p]=h);for(;a<r;++a)s[a]=t[a];return new tn(s,this._parents,this._name,this._id)}function Yo(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function Bo(n,t,e){var r,i,o=Yo(t)?Nt:Q;return function(){var s=o(this,n),a=s.on;a!==r&&(i=(r=a).copy()).on(t,e),s.on=i}}function Uo(n,t){var e=this._id;return arguments.length<2?W(this.node(),e).on.on(n):this.each(Bo(e,n,t))}function Ko(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function Wo(){return this.on("end.remove",Ko(this._id))}function Jo(n){var t=this._name,e=this._id;typeof n!="function"&&(n=mt(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],f=a.length,l=o[s]=new Array(f),u,c,h=0;h<f;++h)(u=a[h])&&(c=n.call(u,u.__data__,h,a))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c,nt(l[h],t,e,h,l,W(u,e)));return new tn(o,this._parents,t,e)}function Qo(n){var t=this._name,e=this._id;typeof n!="function"&&(n=pe(n));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var f=r[a],l=f.length,u,c=0;c<l;++c)if(u=f[c]){for(var h=n.call(u,u.__data__,c,f),p,g=W(u,e),_=0,v=h.length;_<v;++_)(p=h[_])&&nt(p,t,e,_,h,g);o.push(h),s.push(u)}return new tn(o,s,t,e)}var Zo=$n.prototype.constructor;function jo(){return new Zo(this._groups,this._parents)}function ns(n,t){var e,r,i;return function(){var o=ln(this,n),s=(this.style.removeProperty(n),ln(this,n));return o===s?null:o===e&&s===r?i:i=t(e=o,r=s)}}function Ie(n){return function(){this.style.removeProperty(n)}}function ts(n,t,e){var r,i=e+"",o;return function(){var s=ln(this,n);return s===i?null:s===r?o:o=t(r=s,e)}}function es(n,t,e){var r,i,o;return function(){var s=ln(this,n),a=e(this),f=a+"";return a==null&&(f=a=(this.style.removeProperty(n),ln(this,n))),s===f?null:s===r&&f===i?o:(i=f,o=t(r=s,a))}}function rs(n,t){var e,r,i,o="style."+t,s="end."+o,a;return function(){var f=Q(this,n),l=f.on,u=f.value[o]==null?a||(a=Ie(t)):void 0;(l!==e||i!==u)&&(r=(e=l).copy()).on(s,i=u),f.on=r}}function is(n,t,e){var r=(n+="")=="transform"?so:Pe;return t==null?this.styleTween(n,ns(n,r)).on("end.style."+n,Ie(n)):typeof t=="function"?this.styleTween(n,es(n,r,At(this,"style."+n,t))).each(rs(this._id,n)):this.styleTween(n,ts(n,r,t),e).on("end.style."+n,null)}function os(n,t,e){return function(r){this.style.setProperty(n,t.call(this,r),e)}}function ss(n,t,e){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&os(n,s,e)),r}return o._value=t,o}function us(n,t,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ss(n,t,e??""))}function as(n){return function(){this.textContent=n}}function fs(n){return function(){var t=n(this);this.textContent=t??""}}function ls(n){return this.tween("text",typeof n=="function"?fs(At(this,"text",n)):as(n==null?"":n+""))}function cs(n){return function(t){this.textContent=n.call(this,t)}}function hs(n){var t,e;function r(){var i=n.apply(this,arguments);return i!==e&&(t=(e=i)&&cs(i)),t}return r._value=n,r}function ps(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,hs(n))}function gs(){for(var n=this._name,t=this._id,e=He(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,f,l=0;l<a;++l)if(f=s[l]){var u=W(f,t);nt(f,n,e,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tn(r,this._parents,n,e)}function ds(){var n,t,e=this,r=e._id,i=e.size();return new Promise(function(o,s){var a={value:s},f={value:function(){--i===0&&o()}};e.each(function(){var l=Q(this,r),u=l.on;u!==n&&(t=(n=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(f)),l.on=t}),i===0&&o()})}var vs=0;function tn(n,t,e,r){this._groups=n,this._parents=t,this._name=e,this._id=r}function He(){return++vs}var nn=$n.prototype;tn.prototype={constructor:tn,select:Jo,selectAll:Qo,selectChild:nn.selectChild,selectChildren:nn.selectChildren,filter:Go,merge:Vo,selection:jo,transition:gs,call:nn.call,nodes:nn.nodes,node:nn.node,size:nn.size,empty:nn.empty,each:nn.each,on:Uo,attr:Co,attrTween:ko,style:is,styleTween:us,text:ls,textTween:ps,remove:Wo,tween:mo,delay:Ho,duration:Oo,ease:zo,easeVarying:qo,end:ds,[Symbol.iterator]:nn[Symbol.iterator]};function _s(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var ys={time:null,delay:0,duration:250,ease:_s};function ws(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function ms(n){var t,e;n instanceof tn?(t=n._id,n=n._name):(t=He(),(e=ys).time=St(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,f,l=0;l<a;++l)(f=s[l])&&nt(f,n,t,l,s,e||ws(f,t));return new tn(r,this._parents,n,t)}$n.prototype.interrupt=_o;$n.prototype.transition=ms;var b=1e-6,xs=1e-12,M=Math.PI,G=M/2,Bt=M/4,B=M*2,V=180/M,F=M/180,P=Math.abs,Le=Math.atan,An=Math.atan2,H=Math.cos,Es=Math.exp,Ss=Math.log,L=Math.sin,Ns=Math.sign||function(n){return n>0?1:n<0?-1:0},tt=Math.sqrt,As=Math.tan;function Ms(n){return n>1?0:n<-1?M:Math.acos(n)}function Mn(n){return n>1?G:n<-1?-G:Math.asin(n)}function yn(){}function Kn(n,t){n&&Kt.hasOwnProperty(n.type)&&Kt[n.type](n,t)}var Ut={Feature:function(n,t){Kn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)Kn(e[r].geometry,t)}},Kt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)gt(e[r],t,0)},Polygon:function(n,t){Wt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Wt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)Kn(e[r],t)}};function gt(n,t,e){var r=-1,i=n.length-e,o;for(t.lineStart();++r<i;)o=n[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Wt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)gt(n[e],t,1);t.polygonEnd()}function Cs(n,t){n&&Ut.hasOwnProperty(n.type)?Ut[n.type](n,t):Kn(n,t)}function dt(n){return[An(n[1],n[0]),Mn(n[2])]}function hn(n){var t=n[0],e=n[1],r=H(e);return[r*H(t),r*L(t),L(e)]}function In(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Wn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ot(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Hn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function vt(n){var t=tt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n,t){function e(r,i){return r=n(r,i),t(r[0],r[1])}return n.invert&&t.invert&&(e.invert=function(r,i){return r=t.invert(r,i),r&&n.invert(r[0],r[1])}),e}function yt(n,t){return P(n)>M&&(n-=Math.round(n/B)*B),[n,t]}yt.invert=yt;function Fe(n,t,e){return(n%=B)?t||e?_t(Qt(n),Zt(t,e)):Qt(n):t||e?Zt(t,e):yt}function Jt(n){return function(t,e){return t+=n,P(t)>M&&(t-=Math.round(t/B)*B),[t,e]}}function Qt(n){var t=Jt(n);return t.invert=Jt(-n),t}function Zt(n,t){var e=H(n),r=L(n),i=H(t),o=L(t);function s(a,f){var l=H(f),u=H(a)*l,c=L(a)*l,h=L(f),p=h*e+u*r;return[An(c*i-p*o,u*e-h*r),Mn(p*i+c*o)]}return s.invert=function(a,f){var l=H(f),u=H(a)*l,c=L(a)*l,h=L(f),p=h*i-c*o;return[An(c*i+h*o,u*e+p*r),Mn(p*e-u*r)]},s}function $s(n){n=Fe(n[0]*F,n[1]*F,n.length>2?n[2]*F:0);function t(e){return e=n(e[0]*F,e[1]*F),e[0]*=V,e[1]*=V,e}return t.invert=function(e){return e=n.invert(e[0]*F,e[1]*F),e[0]*=V,e[1]*=V,e},t}function Ts(n,t,e,r,i,o){if(e){var s=H(t),a=L(t),f=r*e;i==null?(i=t+r*B,o=t-f/2):(i=jt(s,i),o=jt(s,o),(r>0?i<o:i>o)&&(i+=r*B));for(var l,u=i;r>0?u>o:u<o;u-=f)l=dt([s,-a*H(u),-a*L(u)]),n.point(l[0],l[1])}}function jt(n,t){t=hn(t),t[0]-=n,vt(t);var e=Ms(-t[1]);return((-t[2]<0?-e:e)+B-b)%B}function Oe(){var n=[],t;return{point:function(e,r,i){t.push([e,r,i])},lineStart:function(){n.push(t=[])},lineEnd:yn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Xn(n,t){return P(n[0]-t[0])<b&&P(n[1]-t[1])<b}function Ln(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function De(n,t,e,r,i){var o=[],s=[],a,f;if(n.forEach(function(g){if(!((_=g.length-1)<=0)){var _,v=g[0],S=g[_],y;if(Xn(v,S)){if(!v[2]&&!S[2]){for(i.lineStart(),a=0;a<_;++a)i.point((v=g[a])[0],v[1]);i.lineEnd();return}S[0]+=2*b}o.push(y=new Ln(v,g,null,!0)),s.push(y.o=new Ln(v,null,y,!1)),o.push(y=new Ln(S,g,null,!1)),s.push(y.o=new Ln(S,null,y,!0))}}),!!o.length){for(s.sort(t),ne(o),ne(s),a=0,f=s.length;a<f;++a)s[a].e=e=!e;for(var l=o[0],u,c;;){for(var h=l,p=!0;h.v;)if((h=h.n)===l)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,f=u.length;a<f;++a)i.point((c=u[a])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(u=h.p.z,a=u.length-1;a>=0;--a)i.point((c=u[a])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);i.lineEnd()}}}function ne(n){if(t=n.length){for(var t,e=0,r=n[0],i;++e<t;)r.n=i=n[e],i.p=r,r=i;r.n=i=n[0],i.p=r}}function st(n){return P(n[0])<=M?n[0]:Ns(n[0])*((P(n[0])+M)%B-M)}function Rs(n,t){var e=st(t),r=t[1],i=L(r),o=[L(e),-H(e),0],s=0,a=0,f=new er;i===1?r=G+b:i===-1&&(r=-G-b);for(var l=0,u=n.length;l<u;++l)if(h=(c=n[l]).length)for(var c,h,p=c[h-1],g=st(p),_=p[1]/2+Bt,v=L(_),S=H(_),y=0;y<h;++y,g=w,v=N,S=T,p=m){var m=c[y],w=st(m),x=m[1]/2+Bt,N=L(x),T=H(x),C=w-g,$=C>=0?1:-1,k=$*C,E=k>M,D=v*N;if(f.add(An(D*$*L(k),S*T+D*H(k))),s+=E?C+$*B:C,E^g>=e^w>=e){var I=Wn(hn(p),hn(m));vt(I);var R=Wn(o,I);vt(R);var d=(E^C>=0?-1:1)*Mn(R[2]);(r>d||r===d&&(I[0]||I[1]))&&(a+=E^C>=0?1:-1)}}return(s<-b||s<b&&f<-xs)^a&1}function ze(n,t,e,r){return function(i){var o=t(i),s=Oe(),a=t(s),f=!1,l,u,c,h={point:p,lineStart:_,lineEnd:v,polygonStart:function(){h.point=S,h.lineStart=y,h.lineEnd=m,u=[],l=[]},polygonEnd:function(){h.point=p,h.lineStart=_,h.lineEnd=v,u=le(u);var w=Rs(l,r);u.length?(f||(i.polygonStart(),f=!0),De(u,ks,w,e,i)):w&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(w,x){n(w,x)&&i.point(w,x)}function g(w,x){o.point(w,x)}function _(){h.point=g,o.lineStart()}function v(){h.point=p,o.lineEnd()}function S(w,x){c.push([w,x]),a.point(w,x)}function y(){a.lineStart(),c=[]}function m(){S(c[0][0],c[0][1]),a.lineEnd();var w=a.clean(),x=s.result(),N,T=x.length,C,$,k;if(c.pop(),l.push(c),c=null,!!T){if(w&1){if($=x[0],(C=$.length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),N=0;N<C;++N)i.point((k=$[N])[0],k[1]);i.lineEnd()}return}T>1&&w&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(bs))}}return h}}function bs(n){return n.length>1}function ks(n,t){return((n=n.x)[0]<0?n[1]-G-b:G-n[1])-((t=t.x)[0]<0?t[1]-G-b:G-t[1])}const te=ze(function(){return!0},Ps,Hs,[-M,-G]);function Ps(n){var t=NaN,e=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?M:-M,f=P(o-t);P(f-M)<b?(n.point(t,e=(e+s)/2>0?G:-G),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(o,e),i=0):r!==a&&f>=M&&(P(t-r)<b&&(t-=r*b),P(o-a)<b&&(o-=a*b),e=Is(t,e,o,s),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(a,e),i=0),n.point(t=o,e=s),r=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-i}}}function Is(n,t,e,r){var i,o,s=L(n-e);return P(s)>b?Le((L(t)*(o=H(r))*L(e)-L(r)*(i=H(t))*L(n))/(i*o*s)):(t+r)/2}function Hs(n,t,e,r){var i;if(n==null)i=e*G,r.point(-M,i),r.point(0,i),r.point(M,i),r.point(M,0),r.point(M,-i),r.point(0,-i),r.point(-M,-i),r.point(-M,0),r.point(-M,i);else if(P(n[0]-t[0])>b){var o=n[0]<t[0]?M:-M;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Ls(n){var t=H(n),e=2*F,r=t>0,i=P(t)>b;function o(u,c,h,p){Ts(p,n,e,h,u,c)}function s(u,c){return H(u)*H(c)>t}function a(u){var c,h,p,g,_;return{lineStart:function(){g=p=!1,_=1},point:function(v,S){var y=[v,S],m,w=s(v,S),x=r?w?0:l(v,S):w?l(v+(v<0?M:-M),S):0;if(!c&&(g=p=w)&&u.lineStart(),w!==p&&(m=f(c,y),(!m||Xn(c,m)||Xn(y,m))&&(y[2]=1)),w!==p)_=0,w?(u.lineStart(),m=f(y,c),u.point(m[0],m[1])):(m=f(c,y),u.point(m[0],m[1],2),u.lineEnd()),c=m;else if(i&&c&&r^w){var N;!(x&h)&&(N=f(y,c,!0))&&(_=0,r?(u.lineStart(),u.point(N[0][0],N[0][1]),u.point(N[1][0],N[1][1]),u.lineEnd()):(u.point(N[1][0],N[1][1]),u.lineEnd(),u.lineStart(),u.point(N[0][0],N[0][1],3)))}w&&(!c||!Xn(c,y))&&u.point(y[0],y[1]),c=y,p=w,h=x},lineEnd:function(){p&&u.lineEnd(),c=null},clean:function(){return _|(g&&p)<<1}}}function f(u,c,h){var p=hn(u),g=hn(c),_=[1,0,0],v=Wn(p,g),S=In(v,v),y=v[0],m=S-y*y;if(!m)return!h&&u;var w=t*S/m,x=-t*y/m,N=Wn(_,v),T=Hn(_,w),C=Hn(v,x);ot(T,C);var $=N,k=In(T,$),E=In($,$),D=k*k-E*(In(T,T)-1);if(!(D<0)){var I=tt(D),R=Hn($,(-k-I)/E);if(ot(R,T),R=dt(R),!h)return R;var d=u[0],A=c[0],O=u[1],z=c[1],Y;A<d&&(Y=d,d=A,A=Y);var gn=A-d,Z=P(gn-M)<b,rn=Z||gn<b;if(!Z&&z<O&&(Y=O,O=z,z=Y),rn?Z?O+z>0^R[1]<(P(R[0]-d)<b?O:z):O<=R[1]&&R[1]<=z:gn>M^(d<=R[0]&&R[0]<=A)){var j=Hn($,(-k+I)/E);return ot(j,T),[R,dt(j)]}}}function l(u,c){var h=r?n:M-n,p=0;return u<-h?p|=1:u>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return ze(s,a,o,r?[0,-n]:[-M,n-M])}function Fs(n,t,e,r,i,o){var s=n[0],a=n[1],f=t[0],l=t[1],u=0,c=1,h=f-s,p=l-a,g;if(g=e-s,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<c&&(c=g)}else if(h>0){if(g>c)return;g>u&&(u=g)}if(g=i-s,!(!h&&g<0)){if(g/=h,h<0){if(g>c)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<c&&(c=g)}if(g=r-a,!(!p&&g>0)){if(g/=p,p<0){if(g<u)return;g<c&&(c=g)}else if(p>0){if(g>c)return;g>u&&(u=g)}if(g=o-a,!(!p&&g<0)){if(g/=p,p<0){if(g>c)return;g>u&&(u=g)}else if(p>0){if(g<u)return;g<c&&(c=g)}return u>0&&(n[0]=s+u*h,n[1]=a+u*p),c<1&&(t[0]=s+c*h,t[1]=a+c*p),!0}}}}}var wn=1e9,Fn=-wn;function Os(n,t,e,r){function i(l,u){return n<=l&&l<=e&&t<=u&&u<=r}function o(l,u,c,h){var p=0,g=0;if(l==null||(p=s(l,c))!==(g=s(u,c))||f(l,u)<0^c>0)do h.point(p===0||p===3?n:e,p>1?r:t);while((p=(p+c+4)%4)!==g);else h.point(u[0],u[1])}function s(l,u){return P(l[0]-n)<b?u>0?0:3:P(l[0]-e)<b?u>0?2:1:P(l[1]-t)<b?u>0?1:0:u>0?3:2}function a(l,u){return f(l.x,u.x)}function f(l,u){var c=s(l,1),h=s(u,1);return c!==h?c-h:c===0?u[1]-l[1]:c===1?l[0]-u[0]:c===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,c=Oe(),h,p,g,_,v,S,y,m,w,x,N,T={point:C,lineStart:D,lineEnd:I,polygonStart:k,polygonEnd:E};function C(d,A){i(d,A)&&u.point(d,A)}function $(){for(var d=0,A=0,O=p.length;A<O;++A)for(var z=p[A],Y=1,gn=z.length,Z=z[0],rn,j,Rn=Z[0],an=Z[1];Y<gn;++Y)rn=Rn,j=an,Z=z[Y],Rn=Z[0],an=Z[1],j<=r?an>r&&(Rn-rn)*(r-j)>(an-j)*(n-rn)&&++d:an<=r&&(Rn-rn)*(r-j)<(an-j)*(n-rn)&&--d;return d}function k(){u=c,h=[],p=[],N=!0}function E(){var d=$(),A=N&&d,O=(h=le(h)).length;(A||O)&&(l.polygonStart(),A&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),O&&De(h,a,d,o,l),l.polygonEnd()),u=l,h=p=g=null}function D(){T.point=R,p&&p.push(g=[]),x=!0,w=!1,y=m=NaN}function I(){h&&(R(_,v),S&&w&&c.rejoin(),h.push(c.result())),T.point=C,w&&u.lineEnd()}function R(d,A){var O=i(d,A);if(p&&g.push([d,A]),x)_=d,v=A,S=O,x=!1,O&&(u.lineStart(),u.point(d,A));else if(O&&w)u.point(d,A);else{var z=[y=Math.max(Fn,Math.min(wn,y)),m=Math.max(Fn,Math.min(wn,m))],Y=[d=Math.max(Fn,Math.min(wn,d)),A=Math.max(Fn,Math.min(wn,A))];Fs(z,Y,n,t,e,r)?(w||(u.lineStart(),u.point(z[0],z[1])),u.point(Y[0],Y[1]),O||u.lineEnd(),N=!1):O&&(u.lineStart(),u.point(d,A),N=!1)}y=d,m=A,w=O}return T}}const ee=n=>n;var pn=1/0,Jn=pn,Cn=-pn,Qn=Cn,re={point:Ds,lineStart:yn,lineEnd:yn,polygonStart:yn,polygonEnd:yn,result:function(){var n=[[pn,Jn],[Cn,Qn]];return Cn=Qn=-(Jn=pn=1/0),n}};function Ds(n,t){n<pn&&(pn=n),n>Cn&&(Cn=n),t<Jn&&(Jn=t),t>Qn&&(Qn=t)}function Mt(n){return function(t){var e=new wt;for(var r in n)e[r]=n[r];return e.stream=t,e}}function wt(){}wt.prototype={constructor:wt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ct(n,t,e){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),Cs(e,n.stream(re)),t(re.result()),r!=null&&n.clipExtent(r),n}function Xe(n,t,e){return Ct(n,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,f=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;n.scale(150*s).translate([a,f])},e)}function zs(n,t,e){return Xe(n,[[0,0],t],e)}function Xs(n,t,e){return Ct(n,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];n.scale(150*o).translate([s,a])},e)}function qs(n,t,e){return Ct(n,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([s,a])},e)}var ie=16,Gs=H(30*F);function oe(n,t){return+t?Ys(n,t):Vs(n)}function Vs(n){return Mt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Ys(n,t){function e(r,i,o,s,a,f,l,u,c,h,p,g,_,v){var S=l-r,y=u-i,m=S*S+y*y;if(m>4*t&&_--){var w=s+h,x=a+p,N=f+g,T=tt(w*w+x*x+N*N),C=Mn(N/=T),$=P(P(N)-1)<b||P(o-c)<b?(o+c)/2:An(x,w),k=n($,C),E=k[0],D=k[1],I=E-r,R=D-i,d=y*I-S*R;(d*d/m>t||P((S*I+y*R)/m-.5)>.3||s*h+a*p+f*g<Gs)&&(e(r,i,o,s,a,f,E,D,$,w/=T,x/=T,N,_,v),v.point(E,D),e(E,D,$,w,x,N,l,u,c,h,p,g,_,v))}}return function(r){var i,o,s,a,f,l,u,c,h,p,g,_,v={point:S,lineStart:y,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=x},polygonEnd:function(){r.polygonEnd(),v.lineStart=y}};function S(C,$){C=n(C,$),r.point(C[0],C[1])}function y(){c=NaN,v.point=m,r.lineStart()}function m(C,$){var k=hn([C,$]),E=n(C,$);e(c,h,u,p,g,_,c=E[0],h=E[1],u=C,p=k[0],g=k[1],_=k[2],ie,r),r.point(c,h)}function w(){v.point=S,r.lineEnd()}function x(){y(),v.point=N,v.lineEnd=T}function N(C,$){m(i=C,$),o=c,s=h,a=p,f=g,l=_,v.point=m}function T(){e(c,h,u,p,g,_,o,s,i,a,f,l,ie,r),v.lineEnd=w,w()}return v}}var Bs=Mt({point:function(n,t){this.stream.point(n*F,t*F)}});function Us(n){return Mt({point:function(t,e){var r=n(t,e);return this.stream.point(r[0],r[1])}})}function Ks(n,t,e,r,i){function o(s,a){return s*=r,a*=i,[t+n*s,e-n*a]}return o.invert=function(s,a){return[(s-t)/n*r,(e-a)/n*i]},o}function se(n,t,e,r,i,o){if(!o)return Ks(n,t,e,r,i);var s=H(o),a=L(o),f=s*n,l=a*n,u=s/n,c=a/n,h=(a*e-s*t)/n,p=(a*t+s*e)/n;function g(_,v){return _*=r,v*=i,[f*_-l*v+t,e-l*_-f*v]}return g.invert=function(_,v){return[r*(u*_-c*v+h),i*(p-c*_-u*v)]},g}function Ws(n){return Js(function(){return n})()}function Js(n){var t,e=150,r=480,i=250,o=0,s=0,a=0,f=0,l=0,u,c=0,h=1,p=1,g=null,_=te,v=null,S,y,m,w=ee,x=.5,N,T,C,$,k;function E(d){return C(d[0]*F,d[1]*F)}function D(d){return d=C.invert(d[0],d[1]),d&&[d[0]*V,d[1]*V]}E.stream=function(d){return $&&k===d?$:$=Bs(Us(u)(_(N(w(k=d)))))},E.preclip=function(d){return arguments.length?(_=d,g=void 0,R()):_},E.postclip=function(d){return arguments.length?(w=d,v=S=y=m=null,R()):w},E.clipAngle=function(d){return arguments.length?(_=+d?Ls(g=d*F):(g=null,te),R()):g*V},E.clipExtent=function(d){return arguments.length?(w=d==null?(v=S=y=m=null,ee):Os(v=+d[0][0],S=+d[0][1],y=+d[1][0],m=+d[1][1]),R()):v==null?null:[[v,S],[y,m]]},E.scale=function(d){return arguments.length?(e=+d,I()):e},E.translate=function(d){return arguments.length?(r=+d[0],i=+d[1],I()):[r,i]},E.center=function(d){return arguments.length?(o=d[0]%360*F,s=d[1]%360*F,I()):[o*V,s*V]},E.rotate=function(d){return arguments.length?(a=d[0]%360*F,f=d[1]%360*F,l=d.length>2?d[2]%360*F:0,I()):[a*V,f*V,l*V]},E.angle=function(d){return arguments.length?(c=d%360*F,I()):c*V},E.reflectX=function(d){return arguments.length?(h=d?-1:1,I()):h<0},E.reflectY=function(d){return arguments.length?(p=d?-1:1,I()):p<0},E.precision=function(d){return arguments.length?(N=oe(T,x=d*d),R()):tt(x)},E.fitExtent=function(d,A){return Xe(E,d,A)},E.fitSize=function(d,A){return zs(E,d,A)},E.fitWidth=function(d,A){return Xs(E,d,A)},E.fitHeight=function(d,A){return qs(E,d,A)};function I(){var d=se(e,0,0,h,p,c).apply(null,t(o,s)),A=se(e,r-d[0],i-d[1],h,p,c);return u=Fe(a,f,l),T=_t(t,A),C=_t(u,T),N=oe(T,x),R()}function R(){return $=k=null,E}return function(){return t=n.apply(this,arguments),E.invert=t.invert&&D,I()}}function $t(n,t){return[n,Ss(As((G+t)/2))]}$t.invert=function(n,t){return[n,2*Le(Es(t))-G]};function Qs(){return Zs($t).scale(961/B)}function Zs(n){var t=Ws(n),e=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,f,l;t.scale=function(c){return arguments.length?(r(c),u()):r()},t.translate=function(c){return arguments.length?(i(c),u()):i()},t.center=function(c){return arguments.length?(e(c),u()):e()},t.clipExtent=function(c){return arguments.length?(c==null?s=a=f=l=null:(s=+c[0][0],a=+c[0][1],f=+c[1][0],l=+c[1][1]),u()):s==null?null:[[s,a],[f,l]]};function u(){var c=M*r(),h=t($s(t.rotate()).invert([0,0]));return o(s==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:n===$t?[[Math.max(h[0]-c,s),a],[Math.min(h[0]+c,f),l]]:[[s,Math.max(h[1]-c,a)],[f,Math.min(h[1]+c,l)]])}return u()}function mn(n,t,e){this.k=n,this.x=t,this.y=e}mn.prototype={constructor:mn,scale:function(n){return n===1?this:new mn(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new mn(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};mn.prototype;function js(){Ue();const n=Ke(Je,Ve+"/geo/china.json"),[t,e]=et.useState([]);et.useEffect(()=>{let o=JSON.parse(n);const s=[];(f=>{const l=Qs().center([104,37.5]).scale(80).translate([0,0]);f.features.pop(),f.features.forEach(u=>{const c=u.properties.name,h=l(u.properties.center),p=u.geometry.coordinates,g=[];p.forEach((_,v)=>{_.forEach(S=>{if(u.geometry.type=="Polygon"){const[y,m]=l(S);let w=new Tt(y,-m);g.push(w);return}if(!(v>0))for(let y=0;y<S.length;y++){const[m,w]=l(S[y]);let x=new Tt(m,-w);g.push(x)}})}),s.push({name:c,position:h,shapes:g})})})(o),e(s)},[]);const[r,i]=et.useState(!1);return X.jsx("group",{position:[-15,0,0],children:t.map((o,s)=>X.jsxs("mesh",{onClick:a=>{console.log(o)},onPointerOver:()=>{i(s)},children:[X.jsx(je,{points:o.shapes,color:"red"}),X.jsx(nr,{position:[0,0,-1.2],"material-color":s===r?16776960:new fe(255*255+s*10),args:[new We(o.shapes)]}),X.jsx(tr,{position:[o.position[0],-o.position[1],.1],scale:.7,color:"red",children:o.name},s)]},o.name))})}const nu=()=>X.jsxs(Ye,{shadows:!0,dpr:[1,2],style:{height:"60vh"},gl:{alpha:!1},scene:{background:new fe(16777215)},camera:{position:[0,0,90],fov:45},children:[X.jsx(Be,{}),X.jsx(Qe,{children:X.jsx(Ze,{axisColors:["red","green","blue"],labelColor:"black"})}),X.jsx("ambientLight",{intensity:Math.PI}),X.jsx(js,{})]}),tu=`import { staticPath } from '@/utils'
import {
  Extrude,
  GizmoHelper,
  GizmoViewport,
  Line,
  OrbitControls,
  Text,
} from '@react-three/drei'
import { Canvas, useLoader, useThree } from '@react-three/fiber'
import * as d3 from 'd3'
import { useEffect, useState } from 'react'
import * as THREE from 'three'

function Com() {
  const { scene } = useThree()
  const data = useLoader(THREE.FileLoader, staticPath + '/geo/china.json')
  const [fonts, setFonts] = useState([])
  useEffect(() => {
    let _data = JSON.parse(data)
    const fontsArr = []
    const generateGeometry = (jsondata) => {
      // 
      const projection = d3
        .geoMercator()
        .center([104.0, 37.5])
        .scale(80)
        .translate([0, 0])
      jsondata.features.pop()
      jsondata.features.forEach((elem) => {
        const name = elem.properties.name
        const center = projection(elem.properties.center)
        //   
        const coordinates = elem.geometry.coordinates
        const shapes = []
        // 
        coordinates.forEach((multiPolygon, i) => {
          multiPolygon.forEach((polygon) => {
            if (elem.geometry.type == 'Polygon') {
              const [x, y] = projection(polygon)
              let point = new THREE.Vector2(x, -y)
              shapes.push(point)
              return
            }
            if (i > 0) return
            for (let i = 0; i < polygon.length; i++) {
              const [x, y] = projection(polygon[i])
              let point = new THREE.Vector2(x, -y)
              shapes.push(point)
            }
          })
        })
        fontsArr.push({
          name,
          position: center,
          shapes,
        })
      })
    }
    generateGeometry(_data)
    setFonts(fontsArr)
  }, [])

  const [checked, setChecked] = useState(false)

  return (
    <group position={[-15, 0, 0]}>
      {fonts.map((item, i) => {
        return (
          <mesh
            key={item.name}
            onClick={(e) => {
              console.log(item)
            }}
            onPointerOver={() => {
              setChecked(i)
            }}
          >
            <Line points={item.shapes} color="red" />
            <Extrude
              position={[0, 0, -1.2]}
              material-color={
                i === checked ? 0xffff00 : new THREE.Color(255 * 255 + i * 10)
              }
              args={[new THREE.Shape(item.shapes)]}
            ></Extrude>

            <Text
              position={[item.position[0], -item.position[1], 0.1]}
              key={i}
              scale={0.7}
              color="red"
            >
              {item.name}
            </Text>
          </mesh>
        )
      })}
    </group>
  )
}

const Geo = () => {
  return (
    <Canvas
      shadows
      dpr={[1, 2]}
      style={{ height: '60vh' }}
      gl={{ alpha: false }}
      scene={{ background: new THREE.Color(0xffffff) }}
      camera={{ position: [0, 0, 90], fov: 45 }}
    >
      <OrbitControls />
      {/* <axesHelper args={[10]} /> */}
      <GizmoHelper>
        <GizmoViewport
          axisColors={['red', 'green', 'blue']}
          labelColor="black"
        />
      </GizmoHelper>
      <ambientLight intensity={Math.PI} />
      <Com />
    </Canvas>
  )
}
export default Geo
`,eu=void 0,ru=void 0,iu={code:tu,title:eu,desc:ru},ou=!0,su=Object.freeze(Object.defineProperty({__proto__:null,default:nu,demoMeta:iu,isDemo:ou},Symbol.toStringTag,{value:"Module"}));function ue(n){const{Demo:t}={...ae(),...n.components};return t||au("Demo"),X.jsx(t,{...su})}function uu(n={}){const{wrapper:t}={...ae(),...n.components};return t?X.jsx(t,{...n,children:X.jsx(ue,{...n})}):ue(n)}function au(n,t){throw new Error("Expected component `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}const fu=Object.freeze(Object.defineProperty({__proto__:null,default:uu},Symbol.toStringTag,{value:"Module"})),qe={};qe.outlineInfo=Ge;qe.main=fu;export{qe as default};
