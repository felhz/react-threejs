import{j as n,r as W}from"./ssg-client-Bn3Mnl6o.js";import{C as Z,a as $,b as Y,d as N,c as R,u as k,T as X}from"./react-three-fiber.esm-BsxbCMSd.js";import{s as tt}from"./index-CSwHO5PT.js";import{O as rt}from"./OrbitControls-CIOTPSP3.js";import{S as K}from"./shapes-CzsSO_mb.js";import{L as et}from"./Line-DuqW45px.js";import{g as q}from"./index-c_NJVKPv.js";var H=Math.PI/180,V=180/Math.PI,x=function(r,e){this.lon=r,this.lat=e,this.x=H*r,this.y=H*e};x.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};x.prototype.antipode=function(){var r=-1*this.lat,e=this.lon<0?180+this.lon:(180-this.lon)*-1;return new x(e,r)};var L=function(){this.coords=[],this.length=0};L.prototype.move_to=function(r){this.length++,this.coords.push(r)};var A=function(r){this.properties=r||{},this.geometries=[]};A.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var r=[],e=0;e<this.geometries.length;e++)r.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:r},type:"Feature",properties:this.properties}};A.prototype.wkt=function(){for(var r="",e="LINESTRING(",t=function(i){e+=i[0]+" "+i[1]+","},a=0;a<this.geometries.length;a++){if(this.geometries[a].coords.length===0)return"LINESTRING(empty)";var o=this.geometries[a].coords;o.forEach(t),r+=e.substring(0,e.length-1)+")"}return r};var T=function(r,e,t){if(!r||r.x===void 0||r.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new x(r.x,r.y),this.end=new x(e.x,e.y),this.properties=t||{};var a=this.start.x-this.end.x,o=this.start.y-this.end.y,i=Math.pow(Math.sin(o/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(a/2),2);if(this.g=2*Math.asin(Math.sqrt(i)),this.g===Math.PI)throw new Error("it appears "+r.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+r+" and "+e)};T.prototype.interpolate=function(r){var e=Math.sin((1-r)*this.g)/Math.sin(this.g),t=Math.sin(r*this.g)/Math.sin(this.g),a=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),o=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),i=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),v=V*Math.atan2(i,Math.sqrt(Math.pow(a,2)+Math.pow(o,2))),l=V*Math.atan2(o,a);return[l,v]};T.prototype.Arc=function(r,e){var t=[];if(!r||r<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var a=1/(r-1),o=0;o<r;++o){var i=a*o,v=this.interpolate(i);t.push(v)}for(var l=!1,M=0,g=e&&e.offset?e.offset:10,p=180-g,m=-180+g,d=360-g,y=1;y<t.length;++y){var j=t[y-1][0],C=t[y][0],b=Math.abs(C-j);b>d&&(C>p&&j<m||j>p&&C<m)?l=!0:b>M&&(M=b)}var f=[];if(l&&M<g){var h=[];f.push(h);for(var s=0;s<t.length;++s){var _=parseFloat(t[s][0]);if(s>0&&Math.abs(_-t[s-1][0])>d){var c=parseFloat(t[s-1][0]),E=parseFloat(t[s-1][1]),u=parseFloat(t[s][0]),I=parseFloat(t[s][1]);if(c>-180&&c<m&&u===180&&s+1<t.length&&t[s-1][0]>-180&&t[s-1][0]<m){h.push([-180,t[s][1]]),s++,h.push([t[s][0],t[s][1]]);continue}else if(c>p&&c<180&&u===-180&&s+1<t.length&&t[s-1][0]>p&&t[s-1][0]<180){h.push([180,t[s][1]]),s++,h.push([t[s][0],t[s][1]]);continue}if(c<m&&u>p){var Q=c;c=u,u=Q;var U=E;E=I,I=U}if(c>p&&u<m&&(u+=360),c<=180&&u>=180&&c<u){var D=(180-c)/(u-c),G=D*I+(1-D)*E;h.push([t[s-1][0]>p?180:-180,G]),h=[],h.push([t[s-1][0]>p?-180:180,G]),f.push(h)}else h=[],f.push(h);h.push([_,t[s][1]])}else h.push([t[s][0],t[s][1]])}}else{var B=[];f.push(B);for(var w=0;w<t.length;++w)B.push([t[w][0],t[w][1]])}for(var S=new A(this.properties),F=0;F<f.length;++F){var z=new L;S.geometries.push(z);for(var O=f[F],P=0;P<O.length;++P)z.move_to(O[P])}return S};function st(r,e,t){if(t=t||{},typeof t!="object")throw new Error("options is invalid");var a=t.properties,o=t.npoints,i=t.offset;r=q(r),e=q(e),a=a||{},o=o||100,i=i||10;var v=new T({x:r[0],y:r[1]},{x:e[0],y:e[1]},a),l=v.Arc(o,{offset:i});return l.json()}/*!
 * Copyright (c) 2019, Dane Springmeyer
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in
 *       the documentation and/or other materials provided with the
 *       distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const at=(r,e)=>st(r,e,{properties:{name:"Seattle to DC"},npoints:100}).geometry.coordinates;function J(r,e,t){const a=e*Math.PI/180,o=(r-180)*Math.PI/180,i=-t*Math.cos(a)*Math.cos(o),v=t*Math.sin(a),l=t*Math.cos(a)*Math.sin(o);return new R(i,v,l)}function ot({start:r,end:e,lineColor:t="red"}){const a=W.useRef(),o=15,i=at(r,e),v=J(r[0],r[1],o),l=i.map((g,p)=>{const m=(p+1)/i.length;return J(g[0],g[1],o+Math.sin(m*Math.PI))}),M=new Y(l,!1,"catmullrom",.5);return N((g,p)=>{const d=g.clock.getElapsedTime()/3%1,y=M.getPointAt(d);a.current.position.copy(y)}),new R(0,0,1).lerp(new R(1,0,0),.5),n.jsxs(n.Fragment,{children:[n.jsx(K,{position:v,scale:[.2,.2,.2],args:[1],ref:a,children:n.jsx("meshStandardMaterial",{color:"green"})}),n.jsx(et,{points:M.getPoints(50),color:t,opacity:.5})]})}const it=()=>{const r=k(X,tt+"/earth2.png");return n.jsx(K,{args:[15,1e3,1e3],children:n.jsx("meshStandardMaterial",{map:r})})},gt=()=>{const r=[[[116.2,39.56],[74.006,1.7128]],[[116.2,39.56],[116.2,30]],[[116.2,39.56],[74.006,20.7128]],[[116.2,39.56],[130.006,46.7128]]];return n.jsx("div",{style:{height:"60vh"},children:n.jsxs(Z,{shadows:!0,dpr:[1,2],gl:{alpha:!1},scene:{background:new $(16777215)},camera:{position:[0,0,-70],fov:45},children:[n.jsx(rt,{}),n.jsx("axesHelper",{args:[10]}),n.jsx("ambientLight",{intensity:Math.PI}),n.jsx(it,{}),r.map((e,t)=>n.jsx(ot,{start:e[0],end:e[1]},t))]})})};export{gt as S};
